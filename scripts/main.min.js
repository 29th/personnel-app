var requirejs,require,define;!function(global){function isFunction(e){return"[object Function]"===ostring.call(e)}function isArray(e){return"[object Array]"===ostring.call(e)}function each(e,t){if(e){var n;for(n=0;n<e.length&&(!e[n]||!t(e[n],n,e));n+=1);}}function eachReverse(e,t){if(e){var n;for(n=e.length-1;n>-1&&(!e[n]||!t(e[n],n,e));n-=1);}}function hasProp(e,t){return hasOwn.call(e,t)}function getOwn(e,t){return hasProp(e,t)&&e[t]}function eachProp(e,t){var n;for(n in e)if(hasProp(e,n)&&t(e[n],n))break}function mixin(e,t,n,i){return t&&eachProp(t,function(t,r){(n||!hasProp(e,r))&&(!i||"object"!=typeof t||!t||isArray(t)||isFunction(t)||t instanceof RegExp?e[r]=t:(e[r]||(e[r]={}),mixin(e[r],t,n,i)))}),e}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(e){throw e}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),function(e){t=t[e]}),t}function makeError(e,t,n,i){var r=new Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e);return r.requireType=e,r.requireModules=i,n&&(r.originalError=n),r}function newContext(e){function t(e){var t,n,i=e.length;for(t=0;i>t;t++)if(n=e[t],"."===n)e.splice(t,1),t-=1;else if(".."===n){if(1===t&&(".."===e[2]||".."===e[0]))break;t>0&&(e.splice(t-1,2),t-=2)}}function n(e,n,i){var r,s,a,o,l,h,c,u,p,d,f,m=n&&n.split("/"),g=m,v=_.map,b=v&&v["*"];if(e&&"."===e.charAt(0)&&(n?(g=m.slice(0,m.length-1),e=e.split("/"),c=e.length-1,_.nodeIdCompat&&jsSuffixRegExp.test(e[c])&&(e[c]=e[c].replace(jsSuffixRegExp,"")),e=g.concat(e),t(e),e=e.join("/")):0===e.indexOf("./")&&(e=e.substring(2))),i&&v&&(m||b)){a=e.split("/");e:for(o=a.length;o>0;o-=1){if(h=a.slice(0,o).join("/"),m)for(l=m.length;l>0;l-=1)if(s=getOwn(v,m.slice(0,l).join("/")),s&&(s=getOwn(s,h))){u=s,p=o;break e}!d&&b&&getOwn(b,h)&&(d=getOwn(b,h),f=o)}!u&&d&&(u=d,p=f),u&&(a.splice(0,p,u),e=a.join("/"))}return r=getOwn(_.pkgs,e),r?r:e}function i(e){isBrowser&&each(scripts(),function(t){return t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===x.contextName?(t.parentNode.removeChild(t),!0):void 0})}function r(e){var t=getOwn(_.paths,e);return t&&isArray(t)&&t.length>1?(t.shift(),x.require.undef(e),x.require([e]),!0):void 0}function s(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function a(e,t,i,r){var a,o,l,h,c=null,u=t?t.name:null,p=e,d=!0,f="";return e||(d=!1,e="_@r"+(M+=1)),h=s(e),c=h[0],e=h[1],c&&(c=n(c,u,r),o=getOwn(C,c)),e&&(c?f=o&&o.normalize?o.normalize(e,function(e){return n(e,u,r)}):n(e,u,r):(f=n(e,u,r),h=s(f),c=h[0],f=h[1],i=!0,a=x.nameToUrl(f))),l=!c||o||i?"":"_unnormalized"+(A+=1),{prefix:c,name:f,parentMap:t,unnormalized:!!l,url:a,originalName:p,isDefine:d,id:(c?c+"!"+f:f)+l}}function o(e){var t=e.id,n=getOwn(S,t);return n||(n=S[t]=new x.Module(e)),n}function l(e,t,n){var i=e.id,r=getOwn(S,i);!hasProp(C,i)||r&&!r.defineEmitComplete?(r=o(e),r.error&&"error"===t?n(r.error):r.on(t,n)):"defined"===t&&n(C[i])}function h(e,t){var n=e.requireModules,i=!1;t?t(e):(each(n,function(t){var n=getOwn(S,t);n&&(n.error=e,n.events.error&&(i=!0,n.emit("error",e)))}),i||req.onError(e))}function c(){globalDefQueue.length&&(apsp.apply(N,[N.length,0].concat(globalDefQueue)),globalDefQueue=[])}function u(e){delete S[e],delete E[e]}function p(e,t,n){var i=e.map.id;e.error?e.emit("error",e.error):(t[i]=!0,each(e.depMaps,function(i,r){var s=i.id,a=getOwn(S,s);!a||e.depMatched[r]||n[s]||(getOwn(t,s)?(e.defineDep(r,C[s]),e.check()):p(a,t,n))}),n[i]=!0)}function d(){var e,t,n=1e3*_.waitSeconds,s=n&&x.startTime+n<(new Date).getTime(),a=[],o=[],l=!1,c=!0;if(!b){if(b=!0,eachProp(E,function(e){var n=e.map,h=n.id;if(e.enabled&&(n.isDefine||o.push(e),!e.error))if(!e.inited&&s)r(h)?(t=!0,l=!0):(a.push(h),i(h));else if(!e.inited&&e.fetched&&n.isDefine&&(l=!0,!n.prefix))return c=!1}),s&&a.length)return e=makeError("timeout","Load timeout for modules: "+a,null,a),e.contextName=x.contextName,h(e);c&&each(o,function(e){p(e,{},{})}),s&&!t||!l||!isBrowser&&!isWebWorker||k||(k=setTimeout(function(){k=0,d()},50)),b=!1}}function f(e){hasProp(C,e[0])||o(a(e[0],null,!0)).init(e[1],e[2])}function m(e,t,n,i){e.detachEvent&&!isOpera?i&&e.detachEvent(i,t):e.removeEventListener(n,t,!1)}function g(e){var t=e.currentTarget||e.srcElement;return m(t,x.onScriptLoad,"load","onreadystatechange"),m(t,x.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}function v(){var e;for(c();N.length;){if(e=N.shift(),null===e[0])return h(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));f(e)}}var b,y,x,w,k,_={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},S={},E={},q={},N=[],C={},P={},O={},M=1,A=1;return w={require:function(e){return e.require?e.require:e.require=x.makeRequire(e.map)},exports:function(e){return e.usingExports=!0,e.map.isDefine?e.exports?e.exports:e.exports=C[e.map.id]={}:void 0},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return getOwn(_.config,e.map.id)||{}},exports:w.exports(e)}}},y=function(e){this.events=getOwn(q,e.id)||{},this.map=e,this.shim=getOwn(_.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},y.prototype={init:function(e,t,n,i){i=i||{},this.inited||(this.factory=t,n?this.on("error",n):this.events.error&&(n=bind(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=n,this.inited=!0,this.ignore=i.ignore,i.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,x.startTime=(new Date).getTime();var e=this.map;return this.shim?void x.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()})):e.prefix?this.callPlugin():this.load()}},load:function(){var e=this.map.url;P[e]||(P[e]=!0,x.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,t,n=this.map.id,i=this.depExports,r=this.exports,s=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(s)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{r=x.execCb(n,s,i,r)}catch(a){e=a}else r=x.execCb(n,s,i,r);if(this.map.isDefine&&void 0===r&&(t=this.module,t?r=t.exports:this.usingExports&&(r=this.exports)),e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",h(this.error=e)}else r=s;this.exports=r,this.map.isDefine&&!this.ignore&&(C[n]=r,req.onResourceLoad&&req.onResourceLoad(x,this.map,this.depMaps)),u(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var e=this.map,t=e.id,i=a(e.prefix);this.depMaps.push(i),l(i,"defined",bind(this,function(i){var r,s,c,p=getOwn(O,this.map.id),d=this.map.name,f=this.map.parentMap?this.map.parentMap.name:null,m=x.makeRequire(e.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(i.normalize&&(d=i.normalize(d,function(e){return n(e,f,!0)})||""),s=a(e.prefix+"!"+d,this.map.parentMap),l(s,"defined",bind(this,function(e){this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),c=getOwn(S,s.id),void(c&&(this.depMaps.push(s),this.events.error&&c.on("error",bind(this,function(e){this.emit("error",e)})),c.enable()))):p?(this.map.url=x.nameToUrl(p),void this.load()):(r=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),r.error=bind(this,function(e){this.inited=!0,this.error=e,e.requireModules=[t],eachProp(S,function(e){0===e.map.id.indexOf(t+"_unnormalized")&&u(e.map.id)}),h(e)}),r.fromText=bind(this,function(n,i){var s=e.name,l=a(s),c=useInteractive;i&&(n=i),c&&(useInteractive=!1),o(l),hasProp(_.config,t)&&(_.config[s]=_.config[t]);try{req.exec(n)}catch(u){return h(makeError("fromtexteval","fromText eval for "+t+" failed: "+u,u,[t]))}c&&(useInteractive=!0),this.depMaps.push(l),x.completeLoad(s),m([s],r)}),void i.load(e.name,m,r,_))})),x.enable(i,this),this.pluginMaps[i.id]=i},enable:function(){E[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(e,t){var n,i,r;if("string"==typeof e){if(e=a(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,r=getOwn(w,e.id))return void(this.depExports[t]=r(this));this.depCount+=1,l(e,"defined",bind(this,function(e){this.defineDep(t,e),this.check()})),this.errback&&l(e,"error",bind(this,this.errback))}n=e.id,i=S[n],hasProp(w,n)||!i||i.enabled||x.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var t=getOwn(S,e.id);t&&!t.enabled&&x.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},x={config:_,contextName:e,registry:S,defined:C,urlFetched:P,defQueue:N,Module:y,makeModuleMap:a,nextTick:req.nextTick,onError:h,configure:function(e){e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/");var t=_.shim,n={paths:!0,bundles:!0,config:!0,map:!0};eachProp(e,function(e,t){n[t]?(_[t]||(_[t]={}),mixin(_[t],e,!0,!0)):_[t]=e}),e.bundles&&eachProp(e.bundles,function(e,t){each(e,function(e){e!==t&&(O[e]=t)})}),e.shim&&(eachProp(e.shim,function(e,n){isArray(e)&&(e={deps:e}),!e.exports&&!e.init||e.exportsFn||(e.exportsFn=x.makeShimExports(e)),t[n]=e}),_.shim=t),e.packages&&each(e.packages,function(e){var t,n;e="string"==typeof e?{name:e}:e,n=e.name,t=e.location,t&&(_.paths[n]=e.location),_.pkgs[n]=e.name+"/"+(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(S,function(e,t){e.inited||e.map.unnormalized||(e.map=a(t))}),(e.deps||e.callback)&&x.require(e.deps||[],e.callback)},makeShimExports:function(e){function t(){var t;return e.init&&(t=e.init.apply(global,arguments)),t||e.exports&&getGlobal(e.exports)}return t},makeRequire:function(t,r){function s(n,i,l){var c,u,p;return r.enableBuildCallback&&i&&isFunction(i)&&(i.__requireJsBuild=!0),"string"==typeof n?isFunction(i)?h(makeError("requireargs","Invalid require call"),l):t&&hasProp(w,n)?w[n](S[t.id]):req.get?req.get(x,n,t,s):(u=a(n,t,!1,!0),c=u.id,hasProp(C,c)?C[c]:h(makeError("notloaded",'Module name "'+c+'" has not been loaded yet for context: '+e+(t?"":". Use require([])")))):(v(),x.nextTick(function(){v(),p=o(a(null,t)),p.skipMap=r.skipMap,p.init(n,i,l,{enabled:!0}),d()}),s)}return r=r||{},mixin(s,{isBrowser:isBrowser,toUrl:function(e){var i,r=e.lastIndexOf("."),s=e.split("/")[0],a="."===s||".."===s;return-1!==r&&(!a||r>1)&&(i=e.substring(r,e.length),e=e.substring(0,r)),x.nameToUrl(n(e,t&&t.id,!0),i,!0)},defined:function(e){return hasProp(C,a(e,t,!1,!0).id)},specified:function(e){return e=a(e,t,!1,!0).id,hasProp(C,e)||hasProp(S,e)}}),t||(s.undef=function(e){c();var n=a(e,t,!0),r=getOwn(S,e);i(e),delete C[e],delete P[n.url],delete q[e],eachReverse(N,function(t,n){t[0]===e&&N.splice(n,1)}),r&&(r.events.defined&&(q[e]=r.events),u(e))}),s},enable:function(e){var t=getOwn(S,e.id);t&&o(e).enable()},completeLoad:function(e){var t,n,i,s=getOwn(_.shim,e)||{},a=s.exports;for(c();N.length;){if(n=N.shift(),null===n[0]){if(n[0]=e,t)break;t=!0}else n[0]===e&&(t=!0);f(n)}if(i=getOwn(S,e),!t&&!hasProp(C,e)&&i&&!i.inited){if(!(!_.enforceDefine||a&&getGlobal(a)))return r(e)?void 0:h(makeError("nodefine","No define call for "+e,null,[e]));f([e,s.deps||[],s.exportsFn])}d()},nameToUrl:function(e,t,n){var i,r,s,a,o,l,h,c=getOwn(_.pkgs,e);if(c&&(e=c),h=getOwn(O,e))return x.nameToUrl(h,t,n);if(req.jsExtRegExp.test(e))o=e+(t||"");else{for(i=_.paths,r=e.split("/"),s=r.length;s>0;s-=1)if(a=r.slice(0,s).join("/"),l=getOwn(i,a)){isArray(l)&&(l=l[0]),r.splice(0,s,l);break}o=r.join("/"),o+=t||(/^data\:|\?/.test(o)||n?"":".js"),o=("/"===o.charAt(0)||o.match(/^[\w\+\.\-]+:/)?"":_.baseUrl)+o}return _.urlArgs?o+((-1===o.indexOf("?")?"?":"&")+_.urlArgs):o},load:function(e,t){req.load(x,e,t)},execCb:function(e,t,n,i){return t.apply(i,n)},onScriptLoad:function(e){if("load"===e.type||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=g(e);x.completeLoad(t.id)}},onScriptError:function(e){var t=g(e);return r(t.id)?void 0:h(makeError("scripterror","Script error for: "+t.id,e,[t.id]))}},x.require=x.makeRequire(),x}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(e){return"interactive"===e.readyState?interactiveScript=e:void 0}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.1.10",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,ap=Array.prototype,apsp=ap.splice,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}"undefined"==typeof require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(e,t,n,i){var r,s,a=defContextName;return isArray(e)||"string"==typeof e||(s=e,isArray(t)?(e=t,t=n,n=i):e=[]),s&&s.context&&(a=s.context),r=getOwn(contexts,a),r||(r=contexts[a]=req.s.newContext(a)),s&&r.configure(s),r.require(e,t,n)},req.config=function(e){return req(e)},req.nextTick="undefined"!=typeof setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(e){req[e]=function(){var t=contexts[defContextName];return t.require[e].apply(t,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(e){var t=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return t.type=e.scriptType||"text/javascript",t.charset="utf-8",t.async=!0,t},req.load=function(e,t,n){var i,r=e&&e.config||{};if(isBrowser)return i=req.createNode(r,t,n),i.setAttribute("data-requirecontext",e.contextName),i.setAttribute("data-requiremodule",t),!i.attachEvent||i.attachEvent.toString&&i.attachEvent.toString().indexOf("[native code")<0||isOpera?(i.addEventListener("load",e.onScriptLoad,!1),i.addEventListener("error",e.onScriptError,!1)):(useInteractive=!0,i.attachEvent("onreadystatechange",e.onScriptLoad)),i.src=n,currentlyAddingScript=i,baseElement?head.insertBefore(i,baseElement):head.appendChild(i),currentlyAddingScript=null,i;if(isWebWorker)try{importScripts(n),e.completeLoad(t)}catch(s){e.onError(makeError("importscripts","importScripts failed for "+t+" at "+n,s,[t]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(e){return head||(head=e.parentNode),dataMain=e.getAttribute("data-main"),dataMain?(mainScript=dataMain,cfg.baseUrl||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0):void 0}),define=function(e,t,n){var i,r;"string"!=typeof e&&(n=t,t=e,e=null),isArray(t)||(n=t,t=null),!t&&isFunction(n)&&(t=[],n.length&&(n.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(e,n){t.push(n)}),t=(1===n.length?["require"]:["require","exports","module"]).concat(t))),useInteractive&&(i=currentlyAddingScript||getInteractiveScript(),i&&(e||(e=i.getAttribute("data-requiremodule")),r=contexts[i.getAttribute("data-requirecontext")])),(r?r.defQueue:globalDefQueue).push([e,t,n])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}}(this),define("requireLib",function(){});var Handlebars=function(){var e=function(){function e(e){this.string=e}var t;return e.prototype.toString=function(){return""+this.string},t=e}(),t=function(e){function t(e){return o[e]||"&amp;"}function n(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}function i(e){return e instanceof a?e.toString():e||0===e?(e=""+e,h.test(e)?e.replace(l,t):e):""}function r(e){return e||0===e?p(e)&&0===e.length?!0:!1:!0}var s={},a=e,o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},l=/[&<>"'`]/g,h=/[&<>"'`]/;s.extend=n;var c=Object.prototype.toString;s.toString=c;var u=function(e){return"function"==typeof e};u(/x/)&&(u=function(e){return"function"==typeof e&&"[object Function]"===c.call(e)});var u;s.isFunction=u;var p=Array.isArray||function(e){return e&&"object"==typeof e?"[object Array]"===c.call(e):!1};return s.isArray=p,s.escapeExpression=i,s.isEmpty=r,s}(e),n=function(){function e(e,t){var i;t&&t.firstLine&&(i=t.firstLine,e+=" - "+i+":"+t.firstColumn);for(var r=Error.prototype.constructor.call(this,e),s=0;s<n.length;s++)this[n[s]]=r[n[s]];i&&(this.lineNumber=i,this.column=t.firstColumn)}var t,n=["description","fileName","lineNumber","message","name","number","stack"];return e.prototype=new Error,t=e}(),i=function(e,t){function n(e,t){this.helpers=e||{},this.partials=t||{},i(this)}function i(e){e.registerHelper("helperMissing",function(e){if(2===arguments.length)return void 0;throw new o("Missing helper: '"+e+"'")}),e.registerHelper("blockHelperMissing",function(t,n){var i=n.inverse||function(){},r=n.fn;return p(t)&&(t=t.call(this)),t===!0?r(this):t===!1||null==t?i(this):u(t)?t.length>0?e.helpers.each(t,n):i(this):r(t)}),e.registerHelper("each",function(e,t){var n,i=t.fn,r=t.inverse,s=0,a="";if(p(e)&&(e=e.call(this)),t.data&&(n=g(t.data)),e&&"object"==typeof e)if(u(e))for(var o=e.length;o>s;s++)n&&(n.index=s,n.first=0===s,n.last=s===e.length-1),a+=i(e[s],{data:n});else for(var l in e)e.hasOwnProperty(l)&&(n&&(n.key=l,n.index=s,n.first=0===s),a+=i(e[l],{data:n}),s++);return 0===s&&(a=r(this)),a}),e.registerHelper("if",function(e,t){return p(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||a.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,n){return e.helpers["if"].call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})}),e.registerHelper("with",function(e,t){return p(e)&&(e=e.call(this)),a.isEmpty(e)?void 0:t.fn(e)}),e.registerHelper("log",function(t,n){var i=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;e.log(i,t)})}function r(e,t){m.log(e,t)}var s={},a=e,o=t,l="1.3.0";s.VERSION=l;var h=4;s.COMPILER_REVISION=h;var c={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};s.REVISION_CHANGES=c;var u=a.isArray,p=a.isFunction,d=a.toString,f="[object Object]";s.HandlebarsEnvironment=n,n.prototype={constructor:n,logger:m,log:r,registerHelper:function(e,t,n){if(d.call(e)===f){if(n||t)throw new o("Arg not supported with multiple helpers");a.extend(this.helpers,e)}else n&&(t.not=n),this.helpers[e]=t},registerPartial:function(e,t){d.call(e)===f?a.extend(this.partials,e):this.partials[e]=t}};var m={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(e,t){if(m.level<=e){var n=m.methodMap[e];"undefined"!=typeof console&&console[n]&&console[n].call(console,t)}}};s.logger=m,s.log=r;var g=function(e){var t={};return a.extend(t,e),t};return s.createFrame=g,s}(t,n),r=function(e,t,n){function i(e){var t=e&&e[0]||1,n=p;if(t!==n){if(n>t){var i=d[n],r=d[t];throw new u("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+i+") or downgrade your runtime to an older version ("+r+").")}throw new u("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function r(e,t){if(!t)throw new u("No environment passed to template");var n=function(e,n,i,r,s,a){var o=t.VM.invokePartial.apply(this,arguments);if(null!=o)return o;if(t.compile){var l={helpers:r,partials:s,data:a};return s[n]=t.compile(e,{data:void 0!==a},t),s[n](i,l)}throw new u("The partial "+n+" could not be compiled when running in runtime-only mode")},i={escapeExpression:c.escapeExpression,invokePartial:n,programs:[],program:function(e,t,n){var i=this.programs[e];return n?i=a(e,t,n):i||(i=this.programs[e]=a(e,t)),i},merge:function(e,t){var n=e||t;return e&&t&&e!==t&&(n={},c.extend(n,t),c.extend(n,e)),n},programWithDepth:t.VM.programWithDepth,noop:t.VM.noop,compilerInfo:null};return function(n,r){r=r||{};var s,a,o=r.partial?r:t;r.partial||(s=r.helpers,a=r.partials);var l=e.call(i,o,n,s,a,r.data);return r.partial||t.VM.checkRevision(i.compilerInfo),l}}function s(e,t,n){var i=Array.prototype.slice.call(arguments,3),r=function(e,r){return r=r||{},t.apply(this,[e,r.data||n].concat(i))};return r.program=e,r.depth=i.length,r}function a(e,t,n){var i=function(e,i){return i=i||{},t(e,i.data||n)};return i.program=e,i.depth=0,i}function o(e,t,n,i,r,s){var a={partial:!0,helpers:i,partials:r,data:s};if(void 0===e)throw new u("The partial "+t+" could not be found");return e instanceof Function?e(n,a):void 0}function l(){return""}var h={},c=e,u=t,p=n.COMPILER_REVISION,d=n.REVISION_CHANGES;return h.checkRevision=i,h.template=r,h.programWithDepth=s,h.program=a,h.invokePartial=o,h.noop=l,h}(t,n,i),s=function(e,t,n,i,r){var s,a=e,o=t,l=n,h=i,c=r,u=function(){var e=new a.HandlebarsEnvironment;return h.extend(e,a),e.SafeString=o,e.Exception=l,e.Utils=h,e.VM=c,e.template=function(t){return c.template(t,e)},e},p=u();return p.create=u,s=p}(i,e,n,t,r),a=function(e){function t(e){e=e||{},this.firstLine=e.first_line,this.firstColumn=e.first_column,this.lastColumn=e.last_column,this.lastLine=e.last_line}var n,i=e,r={ProgramNode:function(e,n,i,s){var a,o;3===arguments.length?(s=i,i=null):2===arguments.length&&(s=n,n=null),t.call(this,s),this.type="program",this.statements=e,this.strip={},i?(o=i[0],o?(a={first_line:o.firstLine,last_line:o.lastLine,last_column:o.lastColumn,first_column:o.firstColumn},this.inverse=new r.ProgramNode(i,n,a)):this.inverse=new r.ProgramNode(i,n),this.strip.right=n.left):n&&(this.strip.left=n.right)},MustacheNode:function(e,n,i,s,a){if(t.call(this,a),this.type="mustache",this.strip=s,null!=i&&i.charAt){var o=i.charAt(3)||i.charAt(2);this.escaped="{"!==o&&"&"!==o}else this.escaped=!!i;this.sexpr=e instanceof r.SexprNode?e:new r.SexprNode(e,n),this.sexpr.isRoot=!0,this.id=this.sexpr.id,this.params=this.sexpr.params,this.hash=this.sexpr.hash,this.eligibleHelper=this.sexpr.eligibleHelper,this.isHelper=this.sexpr.isHelper},SexprNode:function(e,n,i){t.call(this,i),this.type="sexpr",this.hash=n;var r=this.id=e[0],s=this.params=e.slice(1),a=this.eligibleHelper=r.isSimple;this.isHelper=a&&(s.length||n)},PartialNode:function(e,n,i,r){t.call(this,r),this.type="partial",this.partialName=e,this.context=n,this.strip=i},BlockNode:function(e,n,r,s,a){if(t.call(this,a),e.sexpr.id.original!==s.path.original)throw new i(e.sexpr.id.original+" doesn't match "+s.path.original,this);this.type="block",this.mustache=e,this.program=n,this.inverse=r,this.strip={left:e.strip.left,right:s.strip.right},(n||r).strip.left=e.strip.right,(r||n).strip.right=s.strip.left,r&&!n&&(this.isInverse=!0)},ContentNode:function(e,n){t.call(this,n),this.type="content",this.string=e},HashNode:function(e,n){t.call(this,n),this.type="hash",this.pairs=e},IdNode:function(e,n){t.call(this,n),this.type="ID";for(var r="",s=[],a=0,o=0,l=e.length;l>o;o++){var h=e[o].part;if(r+=(e[o].separator||"")+h,".."===h||"."===h||"this"===h){if(s.length>0)throw new i("Invalid path: "+r,this);".."===h?a++:this.isScoped=!0}else s.push(h)}this.original=r,this.parts=s,this.string=s.join("."),this.depth=a,this.isSimple=1===e.length&&!this.isScoped&&0===a,this.stringModeValue=this.string},PartialNameNode:function(e,n){t.call(this,n),this.type="PARTIAL_NAME",this.name=e.original},DataNode:function(e,n){t.call(this,n),this.type="DATA",this.id=e},StringNode:function(e,n){t.call(this,n),this.type="STRING",this.original=this.string=this.stringModeValue=e},IntegerNode:function(e,n){t.call(this,n),this.type="INTEGER",this.original=this.integer=e,this.stringModeValue=Number(e)},BooleanNode:function(e,n){t.call(this,n),this.type="BOOLEAN",this.bool=e,this.stringModeValue="true"===e},CommentNode:function(e,n){t.call(this,n),this.type="comment",this.comment=e}};return n=r}(n),o=function(){var e,t=function(){function e(e,t){return{left:"~"===e.charAt(2),right:"~"===t.charAt(0)||"~"===t.charAt(1)}}function t(){this.yy={}}var n={trace:function(){},yy:{},symbols_:{error:2,root:3,statements:4,EOF:5,program:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,sexpr:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,partial_option0:27,sexpr_repetition0:28,sexpr_option0:29,dataName:30,param:31,STRING:32,INTEGER:33,BOOLEAN:34,OPEN_SEXPR:35,CLOSE_SEXPR:36,hash:37,hash_repetition_plus0:38,hashSegment:39,ID:40,EQUALS:41,DATA:42,pathSegments:43,SEP:44,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",32:"STRING",33:"INTEGER",34:"BOOLEAN",35:"OPEN_SEXPR",36:"CLOSE_SEXPR",40:"ID",41:"EQUALS",42:"DATA",44:"SEP"},productions_:[0,[3,2],[3,1],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,4],[7,2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,3],[37,1],[39,3],[26,1],[26,1],[26,1],[30,2],[21,1],[43,3],[43,1],[27,0],[27,1],[28,0],[28,2],[29,0],[29,1],[38,1],[38,2]],performAction:function(t,n,i,r,s,a){var o=a.length-1;switch(s){case 1:return new r.ProgramNode(a[o-1],this._$);case 2:return new r.ProgramNode([],this._$);case 3:this.$=new r.ProgramNode([],a[o-1],a[o],this._$);break;case 4:this.$=new r.ProgramNode(a[o-2],a[o-1],a[o],this._$);break;case 5:this.$=new r.ProgramNode(a[o-1],a[o],[],this._$);break;case 6:this.$=new r.ProgramNode(a[o],this._$);break;case 7:this.$=new r.ProgramNode([],this._$);break;case 8:this.$=new r.ProgramNode([],this._$);break;case 9:this.$=[a[o]];break;case 10:a[o-1].push(a[o]),this.$=a[o-1];break;case 11:this.$=new r.BlockNode(a[o-2],a[o-1].inverse,a[o-1],a[o],this._$);break;case 12:this.$=new r.BlockNode(a[o-2],a[o-1],a[o-1].inverse,a[o],this._$);break;case 13:this.$=a[o];break;case 14:this.$=a[o];break;case 15:this.$=new r.ContentNode(a[o],this._$);break;case 16:this.$=new r.CommentNode(a[o],this._$);break;case 17:this.$=new r.MustacheNode(a[o-1],null,a[o-2],e(a[o-2],a[o]),this._$);break;case 18:this.$=new r.MustacheNode(a[o-1],null,a[o-2],e(a[o-2],a[o]),this._$);break;case 19:this.$={path:a[o-1],strip:e(a[o-2],a[o])};break;case 20:this.$=new r.MustacheNode(a[o-1],null,a[o-2],e(a[o-2],a[o]),this._$);break;case 21:this.$=new r.MustacheNode(a[o-1],null,a[o-2],e(a[o-2],a[o]),this._$);break;case 22:this.$=new r.PartialNode(a[o-2],a[o-1],e(a[o-3],a[o]),this._$);break;case 23:this.$=e(a[o-1],a[o]);break;case 24:this.$=new r.SexprNode([a[o-2]].concat(a[o-1]),a[o],this._$);break;case 25:this.$=new r.SexprNode([a[o]],null,this._$);break;case 26:this.$=a[o];break;case 27:this.$=new r.StringNode(a[o],this._$);break;case 28:this.$=new r.IntegerNode(a[o],this._$);break;case 29:this.$=new r.BooleanNode(a[o],this._$);break;case 30:this.$=a[o];break;case 31:a[o-1].isHelper=!0,this.$=a[o-1];break;case 32:this.$=new r.HashNode(a[o],this._$);break;case 33:this.$=[a[o-2],a[o]];break;case 34:this.$=new r.PartialNameNode(a[o],this._$);break;case 35:this.$=new r.PartialNameNode(new r.StringNode(a[o],this._$),this._$);break;case 36:this.$=new r.PartialNameNode(new r.IntegerNode(a[o],this._$));break;case 37:this.$=new r.DataNode(a[o],this._$);break;case 38:this.$=new r.IdNode(a[o],this._$);break;case 39:a[o-2].push({part:a[o],separator:a[o-1]}),this.$=a[o-2];break;case 40:this.$=[{part:a[o]}];break;case 43:this.$=[];break;case 44:a[o-1].push(a[o]);break;case 47:this.$=[a[o]];break;case 48:a[o-1].push(a[o])}},table:[{3:1,4:2,5:[1,3],8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[3]},{5:[1,16],8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[2,2]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{4:20,6:18,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{4:20,6:22,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{17:23,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:29,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:30,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:31,21:24,30:25,40:[1,28],42:[1,27],43:26},{21:33,26:32,32:[1,34],33:[1,35],40:[1,28],43:26},{1:[2,1]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{10:36,20:[1,37]},{4:38,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,7],22:[1,13],23:[1,14],25:[1,15]},{7:39,8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,6],22:[1,13],23:[1,14],25:[1,15]},{17:23,18:[1,40],21:24,30:25,40:[1,28],42:[1,27],43:26},{10:41,20:[1,37]},{18:[1,42]},{18:[2,43],24:[2,43],28:43,32:[2,43],33:[2,43],34:[2,43],35:[2,43],36:[2,43],40:[2,43],42:[2,43]},{18:[2,25],24:[2,25],36:[2,25]},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,38],35:[2,38],36:[2,38],40:[2,38],42:[2,38],44:[1,44]},{21:45,40:[1,28],43:26},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],42:[2,40],44:[2,40]},{18:[1,46]},{18:[1,47]},{24:[1,48]},{18:[2,41],21:50,27:49,40:[1,28],43:26},{18:[2,34],40:[2,34]},{18:[2,35],40:[2,35]},{18:[2,36],40:[2,36]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{21:51,40:[1,28],43:26},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,3],22:[1,13],23:[1,14],25:[1,15]},{4:52,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,5],22:[1,13],23:[1,14],25:[1,15]},{14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]},{18:[2,45],21:56,24:[2,45],29:53,30:60,31:54,32:[1,57],33:[1,58],34:[1,59],35:[1,61],36:[2,45],37:55,38:62,39:63,40:[1,64],42:[1,27],43:26},{40:[1,65]},{18:[2,37],24:[2,37],32:[2,37],33:[2,37],34:[2,37],35:[2,37],36:[2,37],40:[2,37],42:[2,37]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,66]},{18:[2,42]},{18:[1,67]},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],25:[1,15]},{18:[2,24],24:[2,24],36:[2,24]},{18:[2,44],24:[2,44],32:[2,44],33:[2,44],34:[2,44],35:[2,44],36:[2,44],40:[2,44],42:[2,44]},{18:[2,46],24:[2,46],36:[2,46]},{18:[2,26],24:[2,26],32:[2,26],33:[2,26],34:[2,26],35:[2,26],36:[2,26],40:[2,26],42:[2,26]},{18:[2,27],24:[2,27],32:[2,27],33:[2,27],34:[2,27],35:[2,27],36:[2,27],40:[2,27],42:[2,27]},{18:[2,28],24:[2,28],32:[2,28],33:[2,28],34:[2,28],35:[2,28],36:[2,28],40:[2,28],42:[2,28]},{18:[2,29],24:[2,29],32:[2,29],33:[2,29],34:[2,29],35:[2,29],36:[2,29],40:[2,29],42:[2,29]},{18:[2,30],24:[2,30],32:[2,30],33:[2,30],34:[2,30],35:[2,30],36:[2,30],40:[2,30],42:[2,30]},{17:68,21:24,30:25,40:[1,28],42:[1,27],43:26},{18:[2,32],24:[2,32],36:[2,32],39:69,40:[1,70]},{18:[2,47],24:[2,47],36:[2,47],40:[2,47]},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],41:[1,71],42:[2,40],44:[2,40]},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],35:[2,39],36:[2,39],40:[2,39],42:[2,39],44:[2,39]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{36:[1,72]},{18:[2,48],24:[2,48],36:[2,48],40:[2,48]},{41:[1,71]},{21:56,30:60,31:73,32:[1,57],33:[1,58],34:[1,59],35:[1,61],40:[1,28],42:[1,27],43:26},{18:[2,31],24:[2,31],32:[2,31],33:[2,31],34:[2,31],35:[2,31],36:[2,31],40:[2,31],42:[2,31]},{18:[2,33],24:[2,33],36:[2,33],40:[2,33]}],defaultActions:{3:[2,2],16:[2,1],50:[2,42]},parseError:function(e){throw new Error(e)
},parse:function(e){function t(){var e;return e=n.lexer.lex()||1,"number"!=typeof e&&(e=n.symbols_[e]||e),e}var n=this,i=[0],r=[null],s=[],a=this.table,o="",l=0,h=0,c=0;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var u=this.lexer.yylloc;s.push(u);var p=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var d,f,m,g,v,b,y,x,w,k={};;){if(m=i[i.length-1],this.defaultActions[m]?g=this.defaultActions[m]:((null===d||"undefined"==typeof d)&&(d=t()),g=a[m]&&a[m][d]),"undefined"==typeof g||!g.length||!g[0]){var _="";if(!c){w=[];for(b in a[m])this.terminals_[b]&&b>2&&w.push("'"+this.terminals_[b]+"'");_=this.lexer.showPosition?"Parse error on line "+(l+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+w.join(", ")+", got '"+(this.terminals_[d]||d)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==d?"end of input":"'"+(this.terminals_[d]||d)+"'"),this.parseError(_,{text:this.lexer.match,token:this.terminals_[d]||d,line:this.lexer.yylineno,loc:u,expected:w})}}if(g[0]instanceof Array&&g.length>1)throw new Error("Parse Error: multiple actions possible at state: "+m+", token: "+d);switch(g[0]){case 1:i.push(d),r.push(this.lexer.yytext),s.push(this.lexer.yylloc),i.push(g[1]),d=null,f?(d=f,f=null):(h=this.lexer.yyleng,o=this.lexer.yytext,l=this.lexer.yylineno,u=this.lexer.yylloc,c>0&&c--);break;case 2:if(y=this.productions_[g[1]][1],k.$=r[r.length-y],k._$={first_line:s[s.length-(y||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(y||1)].first_column,last_column:s[s.length-1].last_column},p&&(k._$.range=[s[s.length-(y||1)].range[0],s[s.length-1].range[1]]),v=this.performAction.call(k,o,h,l,this.yy,g[1],r,s),"undefined"!=typeof v)return v;y&&(i=i.slice(0,-1*y*2),r=r.slice(0,-1*y),s=s.slice(0,-1*y)),i.push(this.productions_[g[1]][0]),r.push(k.$),s.push(k._$),x=a[i[i.length-2]][i[i.length-1]],i.push(x);break;case 3:return!0}}return!0}},i=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);return t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var r=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===i.length?this.yylloc.first_column:0)+i[i.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,n,i,r;this._more||(this.yytext="",this.match="");for(var s=this._currentRules(),a=0;a<s.length&&(n=this._input.match(this.rules[s[a]]),!n||t&&!(n[0].length>t[0].length)||(t=n,i=a,this.options.flex));a++);return t?(r=t[0].match(/(?:\r\n?|\n).*/g),r&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,s[i],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),e?e:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return"undefined"!=typeof e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)}};return e.options={},e.performAction=function(e,t,n){function i(e,n){return t.yytext=t.yytext.substr(e,t.yyleng-n)}switch(n){case 0:if("\\\\"===t.yytext.slice(-2)?(i(0,1),this.begin("mu")):"\\"===t.yytext.slice(-1)?(i(0,1),this.begin("emu")):this.begin("mu"),t.yytext)return 14;break;case 1:return 14;case 2:return this.popState(),14;case 3:return i(0,4),this.popState(),15;case 4:return 35;case 5:return 36;case 6:return 25;case 7:return 16;case 8:return 20;case 9:return 19;case 10:return 19;case 11:return 23;case 12:return 22;case 13:this.popState(),this.begin("com");break;case 14:return i(3,5),this.popState(),15;case 15:return 22;case 16:return 41;case 17:return 40;case 18:return 40;case 19:return 44;case 20:break;case 21:return this.popState(),24;case 22:return this.popState(),18;case 23:return t.yytext=i(1,2).replace(/\\"/g,'"'),32;case 24:return t.yytext=i(1,2).replace(/\\'/g,"'"),32;case 25:return 42;case 26:return 34;case 27:return 34;case 28:return 33;case 29:return 40;case 30:return t.yytext=i(1,2),40;case 31:return"INVALID";case 32:return 5}},e.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?=([~}\s)])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],e.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[3],inclusive:!1},INITIAL:{rules:[0,1,32],inclusive:!0}},e}();return n.lexer=i,t.prototype=n,n.Parser=t,new t}();return e=t}(),l=function(e,t){function n(e){return e.constructor===s.ProgramNode?e:(r.yy=s,r.parse(e))}var i={},r=e,s=t;return i.parser=r,i.parse=n,i}(o,a),h=function(e){function t(){}function n(e,t,n){if(null==e||"string"!=typeof e&&e.constructor!==n.AST.ProgramNode)throw new s("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+e);t=t||{},"data"in t||(t.data=!0);var i=n.parse(e),r=(new n.Compiler).compile(i,t);return(new n.JavaScriptCompiler).compile(r,t)}function i(e,t,n){function i(){var i=n.parse(e),r=(new n.Compiler).compile(i,t),s=(new n.JavaScriptCompiler).compile(r,t,void 0,!0);return n.template(s)}if(null==e||"string"!=typeof e&&e.constructor!==n.AST.ProgramNode)throw new s("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+e);t=t||{},"data"in t||(t.data=!0);var r;return function(e,t){return r||(r=i()),r.call(this,e,t)}}var r={},s=e;return r.Compiler=t,t.prototype={compiler:t,disassemble:function(){for(var e,t,n,i=this.opcodes,r=[],s=0,a=i.length;a>s;s++)if(e=i[s],"DECLARE"===e.opcode)r.push("DECLARE "+e.name+"="+e.value);else{t=[];for(var o=0;o<e.args.length;o++)n=e.args[o],"string"==typeof n&&(n='"'+n.replace("\n","\\n")+'"'),t.push(n);r.push(e.opcode+" "+t.join(" "))}return r.join("\n")},equals:function(e){var t=this.opcodes.length;if(e.opcodes.length!==t)return!1;for(var n=0;t>n;n++){var i=this.opcodes[n],r=e.opcodes[n];if(i.opcode!==r.opcode||i.args.length!==r.args.length)return!1;for(var s=0;s<i.args.length;s++)if(i.args[s]!==r.args[s])return!1}if(t=this.children.length,e.children.length!==t)return!1;for(n=0;t>n;n++)if(!this.children[n].equals(e.children[n]))return!1;return!0},guid:0,compile:function(e,t){this.opcodes=[],this.children=[],this.depths={list:[]},this.options=t;var n=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0},n)for(var i in n)this.options.knownHelpers[i]=n[i];return this.accept(e)},accept:function(e){var t,n=e.strip||{};return n.left&&this.opcode("strip"),t=this[e.type](e),n.right&&this.opcode("strip"),t},program:function(e){for(var t=e.statements,n=0,i=t.length;i>n;n++)this.accept(t[n]);return this.isSimple=1===i,this.depths.list=this.depths.list.sort(function(e,t){return e-t}),this},compileProgram:function(e){var t,n=(new this.compiler).compile(e,this.options),i=this.guid++;this.usePartial=this.usePartial||n.usePartial,this.children[i]=n;for(var r=0,s=n.depths.list.length;s>r;r++)t=n.depths.list[r],2>t||this.addDepth(t-1);return i},block:function(e){var t=e.mustache,n=e.program,i=e.inverse;n&&(n=this.compileProgram(n)),i&&(i=this.compileProgram(i));var r=t.sexpr,s=this.classifySexpr(r);"helper"===s?this.helperSexpr(r,n,i):"simple"===s?(this.simpleSexpr(r),this.opcode("pushProgram",n),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousSexpr(r,n,i),this.opcode("pushProgram",n),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(e){var t,n,i=e.pairs;this.opcode("pushHash");for(var r=0,s=i.length;s>r;r++)t=i[r],n=t[1],this.options.stringParams?(n.depth&&this.addDepth(n.depth),this.opcode("getContext",n.depth||0),this.opcode("pushStringParam",n.stringModeValue,n.type),"sexpr"===n.type&&this.sexpr(n)):this.accept(n),this.opcode("assignToHash",t[0]);this.opcode("popHash")},partial:function(e){var t=e.partialName;this.usePartial=!0,e.context?this.ID(e.context):this.opcode("push","depth0"),this.opcode("invokePartial",t.name),this.opcode("append")},content:function(e){this.opcode("appendContent",e.string)},mustache:function(e){this.sexpr(e.sexpr),this.opcode(e.escaped&&!this.options.noEscape?"appendEscaped":"append")},ambiguousSexpr:function(e,t,n){var i=e.id,r=i.parts[0],s=null!=t||null!=n;this.opcode("getContext",i.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",n),this.opcode("invokeAmbiguous",r,s)},simpleSexpr:function(e){var t=e.id;"DATA"===t.type?this.DATA(t):t.parts.length?this.ID(t):(this.addDepth(t.depth),this.opcode("getContext",t.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperSexpr:function(e,t,n){var i=this.setupFullMustacheParams(e,t,n),r=e.id.parts[0];if(this.options.knownHelpers[r])this.opcode("invokeKnownHelper",i.length,r);else{if(this.options.knownHelpersOnly)throw new s("You specified knownHelpersOnly, but used the unknown helper "+r,e);this.opcode("invokeHelper",i.length,r,e.isRoot)}},sexpr:function(e){var t=this.classifySexpr(e);"simple"===t?this.simpleSexpr(e):"helper"===t?this.helperSexpr(e):this.ambiguousSexpr(e)},ID:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0];t?this.opcode("lookupOnContext",e.parts[0]):this.opcode("pushContext");for(var n=1,i=e.parts.length;i>n;n++)this.opcode("lookup",e.parts[n])},DATA:function(e){if(this.options.data=!0,e.id.isScoped||e.id.depth)throw new s("Scoped data references are not supported: "+e.original,e);this.opcode("lookupData");for(var t=e.id.parts,n=0,i=t.length;i>n;n++)this.opcode("lookup",t[n])},STRING:function(e){this.opcode("pushString",e.string)},INTEGER:function(e){this.opcode("pushLiteral",e.integer)},BOOLEAN:function(e){this.opcode("pushLiteral",e.bool)},comment:function(){},opcode:function(e){this.opcodes.push({opcode:e,args:[].slice.call(arguments,1)})},declare:function(e,t){this.opcodes.push({opcode:"DECLARE",name:e,value:t})},addDepth:function(e){0!==e&&(this.depths[e]||(this.depths[e]=!0,this.depths.list.push(e)))},classifySexpr:function(e){var t=e.isHelper,n=e.eligibleHelper,i=this.options;if(n&&!t){var r=e.id.parts[0];i.knownHelpers[r]?t=!0:i.knownHelpersOnly&&(n=!1)}return t?"helper":n?"ambiguous":"simple"},pushParams:function(e){for(var t,n=e.length;n--;)t=e[n],this.options.stringParams?(t.depth&&this.addDepth(t.depth),this.opcode("getContext",t.depth||0),this.opcode("pushStringParam",t.stringModeValue,t.type),"sexpr"===t.type&&this.sexpr(t)):this[t.type](t)},setupFullMustacheParams:function(e,t,n){var i=e.params;return this.pushParams(i),this.opcode("pushProgram",t),this.opcode("pushProgram",n),e.hash?this.hash(e.hash):this.opcode("emptyHash"),i}},r.precompile=n,r.compile=i,r}(n),c=function(e,t){function n(e){this.value=e}function i(){}var r,s=e.COMPILER_REVISION,a=e.REVISION_CHANGES,o=e.log,l=t;i.prototype={nameLookup:function(e,t){var n,r;return 0===e.indexOf("depth")&&(n=!0),r=/^[0-9]+$/.test(t)?e+"["+t+"]":i.isValidJavaScriptVariableName(t)?e+"."+t:e+"['"+t+"']",n?"("+e+" && "+r+")":r},compilerInfo:function(){var e=s,t=a[e];return"this.compilerInfo = ["+e+",'"+t+"'];\n"},appendToBuffer:function(e){return this.environment.isSimple?"return "+e+";":{appendToBuffer:!0,content:e,toString:function(){return"buffer += "+e+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(e,t,n,i){this.environment=e,this.options=t||{},o("debug",this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!n,this.context=n||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.compileChildren(e,t);var r,s=e.opcodes;this.i=0;for(var a=s.length;this.i<a;this.i++)r=s[this.i],"DECLARE"===r.opcode?this[r.name]=r.value:this[r.opcode].apply(this,r.args),r.opcode!==this.stripNext&&(this.stripNext=!1);if(this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new l("Compile completed with content left on stack");return this.createFunctionContext(i)},preamble:function(){var e=[];if(this.isChild)e.push("");else{var t=this.namespace,n="helpers = this.merge(helpers, "+t+".helpers);";this.environment.usePartial&&(n=n+" partials = this.merge(partials, "+t+".partials);"),this.options.data&&(n+=" data = data || {};"),e.push(n)}e.push(this.environment.isSimple?"":", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=e},createFunctionContext:function(e){var t=this.stackVars.concat(this.registers.list);if(t.length>0&&(this.source[1]=this.source[1]+", "+t.join(", ")),!this.isChild)for(var n in this.context.aliases)this.context.aliases.hasOwnProperty(n)&&(this.source[1]=this.source[1]+", "+n+"="+this.context.aliases[n]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.pushSource("return buffer;");for(var i=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"],r=0,s=this.environment.depths.list.length;s>r;r++)i.push("depth"+this.environment.depths.list[r]);var a=this.mergeSource();if(this.isChild||(a=this.compilerInfo()+a),e)return i.push(a),Function.apply(this,i);var l="function "+(this.name||"")+"("+i.join(",")+") {\n  "+a+"}";return o("debug",l+"\n\n"),l},mergeSource:function(){for(var e,t="",n=0,i=this.source.length;i>n;n++){var r=this.source[n];r.appendToBuffer?e=e?e+"\n    + "+r.content:r.content:(e&&(t+="buffer += "+e+";\n  ",e=void 0),t+=r+"\n  ")}return t},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e),this.replaceStack(function(t){return e.splice(1,0,t),"blockHelperMissing.call("+e.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e);var t=this.topStack();e.splice(1,0,t),this.pushSource("if (!"+this.lastHelper+") { "+t+" = blockHelperMissing.call("+e.join(", ")+"); }")},appendContent:function(e){this.pendingContent&&(e=this.pendingContent+e),this.stripNext&&(e=e.replace(/^\s+/,"")),this.pendingContent=e},strip:function(){this.pendingContent&&(this.pendingContent=this.pendingContent.replace(/\s+$/,"")),this.stripNext="strip"},append:function(){this.flushInline();var e=this.popStack();this.pushSource("if("+e+" || "+e+" === 0) { "+this.appendToBuffer(e)+" }"),this.environment.isSimple&&this.pushSource("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(e){this.lastContext!==e&&(this.lastContext=e)},lookupOnContext:function(e){this.push(this.nameLookup("depth"+this.lastContext,e,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(e){return"typeof "+e+" === functionType ? "+e+".apply(depth0) : "+e})},lookup:function(e){this.replaceStack(function(t){return t+" == null || "+t+" === false ? "+t+" : "+this.nameLookup(t,e,"context")})},lookupData:function(){this.pushStackLiteral("data")},pushStringParam:function(e,t){this.pushStackLiteral("depth"+this.lastContext),this.pushString(t),"sexpr"!==t&&("string"==typeof e?this.pushString(e):this.pushStackLiteral(e))},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&(this.push("{}"),this.push("{}"))},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[]}},popHash:function(){var e=this.hash;this.hash=this.hashes.pop(),this.options.stringParams&&(this.push("{"+e.contexts.join(",")+"}"),this.push("{"+e.types.join(",")+"}")),this.push("{\n    "+e.values.join(",\n    ")+"\n  }")},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},push:function(e){return this.inlineStack.push(e),e},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){this.pushStackLiteral(null!=e?this.programExpression(e):null)},invokeHelper:function(e,t,n){this.context.aliases.helperMissing="helpers.helperMissing",this.useRegister("helper");var i=this.lastHelper=this.setupHelper(e,t,!0),r=this.nameLookup("depth"+this.lastContext,t,"context"),s="helper = "+i.name+" || "+r;i.paramsInit&&(s+=","+i.paramsInit),this.push("("+s+",helper ? helper.call("+i.callParams+") : helperMissing.call("+i.helperMissingParams+"))"),n||this.flushInline()},invokeKnownHelper:function(e,t){var n=this.setupHelper(e,t);this.push(n.name+".call("+n.callParams+")")},invokeAmbiguous:function(e,t){this.context.aliases.functionType='"function"',this.useRegister("helper"),this.emptyHash();var n=this.setupHelper(0,e,t),i=this.lastHelper=this.nameLookup("helpers",e,"helper"),r=this.nameLookup("depth"+this.lastContext,e,"context"),s=this.nextStack();n.paramsInit&&this.pushSource(n.paramsInit),this.pushSource("if (helper = "+i+") { "+s+" = helper.call("+n.callParams+"); }"),this.pushSource("else { helper = "+r+"; "+s+" = typeof helper === functionType ? helper.call("+n.callParams+") : helper; }")},invokePartial:function(e){var t=[this.nameLookup("partials",e,"partial"),"'"+e+"'",this.popStack(),"helpers","partials"];this.options.data&&t.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+t.join(", ")+")")},assignToHash:function(e){var t,n,i=this.popStack();this.options.stringParams&&(n=this.popStack(),t=this.popStack());var r=this.hash;t&&r.contexts.push("'"+e+"': "+t),n&&r.types.push("'"+e+"': "+n),r.values.push("'"+e+"': ("+i+")")},compiler:i,compileChildren:function(e,t){for(var n,i,r=e.children,s=0,a=r.length;a>s;s++){n=r[s],i=new this.compiler;var o=this.matchExistingProgram(n);null==o?(this.context.programs.push(""),o=this.context.programs.length,n.index=o,n.name="program"+o,this.context.programs[o]=i.compile(n,t,this.context),this.context.environments[o]=n):(n.index=o,n.name="program"+o)}},matchExistingProgram:function(e){for(var t=0,n=this.context.environments.length;n>t;t++){var i=this.context.environments[t];if(i&&i.equals(e))return t}},programExpression:function(e){if(this.context.aliases.self="this",null==e)return"self.noop";for(var t,n=this.environment.children[e],i=n.depths.list,r=[n.index,n.name,"data"],s=0,a=i.length;a>s;s++)t=i[s],r.push(1===t?"depth0":"depth"+(t-1));return(0===i.length?"self.program(":"self.programWithDepth(")+r.join(", ")+")"},register:function(e,t){this.useRegister(e),this.pushSource(e+" = "+t+";")},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},pushStackLiteral:function(e){return this.push(new n(e))},pushSource:function(e){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=void 0),e&&this.source.push(e)},pushStack:function(e){this.flushInline();var t=this.incrStack();return e&&this.pushSource(t+" = "+e+";"),this.compileStack.push(t),t},replaceStack:function(e){var t,i,r,s="",a=this.isInline();if(a){var o=this.popStack(!0);if(o instanceof n)t=o.value,r=!0;else{i=!this.stackSlot;var l=i?this.incrStack():this.topStackName();s="("+this.push(l)+" = "+o+"),",t=this.topStack()}}else t=this.topStack();var h=e.call(this,t);return a?(r||this.popStack(),i&&this.stackSlot--,this.push("("+s+h+")")):(/^stack/.test(t)||(t=this.nextStack()),this.pushSource(t+" = ("+s+h+");")),t},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;if(e.length){this.inlineStack=[];for(var t=0,i=e.length;i>t;t++){var r=e[t];r instanceof n?this.compileStack.push(r):this.pushStack(r)}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),i=(t?this.inlineStack:this.compileStack).pop();if(!e&&i instanceof n)return i.value;if(!t){if(!this.stackSlot)throw new l("Invalid stack pop");this.stackSlot--}return i},topStack:function(e){var t=this.isInline()?this.inlineStack:this.compileStack,i=t[t.length-1];return!e&&i instanceof n?i.value:i},quotedString:function(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(e,t,n){var i=[],r=this.setupParams(e,i,n),s=this.nameLookup("helpers",t,"helper");return{params:i,paramsInit:r,name:s,callParams:["depth0"].concat(i).join(", "),helperMissingParams:n&&["depth0",this.quotedString(t)].concat(i).join(", ")}},setupOptions:function(e,t){var n,i,r,s=[],a=[],o=[];s.push("hash:"+this.popStack()),this.options.stringParams&&(s.push("hashTypes:"+this.popStack()),s.push("hashContexts:"+this.popStack())),i=this.popStack(),r=this.popStack(),(r||i)&&(r||(this.context.aliases.self="this",r="self.noop"),i||(this.context.aliases.self="this",i="self.noop"),s.push("inverse:"+i),s.push("fn:"+r));for(var l=0;e>l;l++)n=this.popStack(),t.push(n),this.options.stringParams&&(o.push(this.popStack()),a.push(this.popStack()));return this.options.stringParams&&(s.push("contexts:["+a.join(",")+"]"),s.push("types:["+o.join(",")+"]")),this.options.data&&s.push("data:data"),s},setupParams:function(e,t,n){var i="{"+this.setupOptions(e,t).join(",")+"}";return n?(this.useRegister("options"),t.push("options"),"options="+i):(t.push(i),"")}};for(var h="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),c=i.RESERVED_WORDS={},u=0,p=h.length;p>u;u++)c[h[u]]=!0;return i.isValidJavaScriptVariableName=function(e){return!i.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e)?!0:!1},r=i}(i,n),u=function(e,t,n,i,r){var s,a=e,o=t,l=n.parser,h=n.parse,c=i.Compiler,u=i.compile,p=i.precompile,d=r,f=a.create,m=function(){var e=f();return e.compile=function(t,n){return u(t,n,e)},e.precompile=function(t,n){return p(t,n,e)},e.AST=o,e.Compiler=c,e.JavaScriptCompiler=d,e.Parser=l,e.parse=h,e};return a=m(),a.create=m,s=a}(s,a,l,h,c);return u}();define("handlebars",function(e){return function(){var t;return t||e.Handlebars}}(this)),function(e,t){"function"==typeof define&&define.amd?define("nprogress",["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):e.gulpWrapUmd=t(e.jquery)}(this,function(){return function(e){"function"==typeof module?module.exports=e(this.jQuery||require("jquery")):this.NProgress=e(this.jQuery)}(function(e){function t(e,t,n){return t>e?t:e>n?n:e}function n(e){return 100*(-1+e)}function i(e,t,i){var r;return r="translate3d"===s.positionUsing?{transform:"translate3d("+n(e)+"%,0,0)"}:"translate"===s.positionUsing?{transform:"translate("+n(e)+"%,0)"}:{"margin-left":n(e)+"%"},r.transition="all "+t+"ms "+i,r}var r={};r.version="0.1.2";var s=r.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};return r.configure=function(t){return e.extend(s,t),this},r.status=null,r.set=function(e){var n=r.isStarted();e=t(e,s.minimum,1),r.status=1===e?null:e;var a=r.render(!n),o=a.find('[role="bar"]'),l=s.speed,h=s.easing;return a[0].offsetWidth,a.queue(function(t){""===s.positionUsing&&(s.positionUsing=r.getPositioningCSS()),o.css(i(e,l,h)),1===e?(a.css({transition:"none",opacity:1}),a[0].offsetWidth,setTimeout(function(){a.css({transition:"all "+l+"ms linear",opacity:0}),setTimeout(function(){r.remove(),t()},l)},l)):setTimeout(t,l)}),this},r.isStarted=function(){return"number"==typeof r.status},r.start=function(){r.status||r.set(0);var e=function(){setTimeout(function(){r.status&&(r.trickle(),e())},s.trickleSpeed)};return s.trickle&&e(),this},r.done=function(e){return e||r.status?r.inc(.3+.5*Math.random()).set(1):this},r.inc=function(e){var n=r.status;return n?("number"!=typeof e&&(e=(1-n)*t(Math.random()*n,.1,.95)),n=t(n+e,0,.994),r.set(n)):r.start()},r.trickle=function(){return r.inc(Math.random()*s.trickleRate)},r.render=function(t){if(r.isRendered())return e("#nprogress");e("html").addClass("nprogress-busy");var i=e("<div id='nprogress'>").html(s.template),a=t?"-100":n(r.status||0);return i.find('[role="bar"]').css({transition:"all 0 linear",transform:"translate3d("+a+"%,0,0)"}),s.showSpinner||i.find('[role="spinner"]').remove(),i.appendTo(document.body),i},r.remove=function(){e("html").removeClass("nprogress-busy"),e("#nprogress").remove()},r.isRendered=function(){return e("#nprogress").length>0},r.getPositioningCSS=function(){var e=document.body.style,t="WebkitTransform"in e?"Webkit":"MozTransform"in e?"Moz":"msTransform"in e?"ms":"OTransform"in e?"O":"";return t+"Perspective"in e?"translate3d":t+"Transform"in e?"translate":"margin"},r}),NProgress}),define("util",["jquery","underscore","handlebars","nprogress"],function(e,t,n,i){var r={};return r.loading=function(e){void 0!==e&&e?i.start():i.done()},r.scrollToTop=function(){e(window).scrollTop(0)},r.formatNumber=function(e,t){return isNaN(e)||null===e?e:(void 0!==t&&(e=t?Math.round(100*e)/100:Math.round(e)),e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","))},r.toLowerCase=function(e){return e&&"string"==typeof e?e.toLowerCase():e},n.registerHelper("toLowerCase",r.toLowerCase),e.fn.serializeObject=function(){var t={},n=this.serializeArray();return e.each(n,function(){void 0!==t[this.name]?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(this.value||"")):t[this.name]=this.value||""}),t},r}),define("config",[],function(){var e={apiHost:"http://api.29th.org"};return e}),define("models/member",["jquery","underscore","backbone","config"],function(e,t,n,i){var r=n.Model.extend({url:function(){return i.apiHost+"/members/"+this.id},parse:function(e){return e.member||{}}});return r}),define("models/user",["jquery","underscore","backbone","config"],function(e,t,n,i){var r=n.Model.extend({url:i.apiHost+"/user",parse:function(e){return e.user||{}}});return r}),define("models/event",["jquery","underscore","backbone","config"],function(e,t,n,i){var r=n.Model.extend({url:function(){return i.apiHost+"/events/"+this.id},parse:function(e){return e.event||{}}});return r}),define("collections/units",["jquery","underscore","backbone","config"],function(e,t,n,i){var r=n.Model.extend({initialize:function(){this.get("children")&&this.set("children",new s(this.get("children")))}}),s=n.Collection.extend({model:r,initialize:function(e,t){t=t||{},this.filter=t.filter||!1,this.children=t.children||!1,this.members=t.members||!1},url:function(){var n={},r=i.apiHost+"/units";return this.filter&&(r+="/"+encodeURIComponent(this.filter)),this.children&&(n.children=this.children),this.members&&(n.members=this.members),t.isEmpty(n)||(r+="?"+e.param(n)),r},parse:function(e){return[e.unit]||[]}});return s}),define("collections/assignments",["jquery","underscore","backbone","config"],function(e,t,n,i){var r=n.Collection.extend({initialize:function(e,t){t=t||{},this.member_id=t.member_id||!1,this.current=t.current||!1},url:function(){var e=i.apiHost+(this.member_id?"/members/"+this.member_id:"/user/")+"/assignments";return this.current&&(e+="?current=true"),e},parse:function(e){return e.assignments||[]}});return r}),define("collections/permissions",["jquery","underscore","backbone","config"],function(e,t,n,i){var r=n.Collection.extend({initialize:function(e,t){t=t||{},this.member_id=t.member_id||!1,this.unit_id=t.unit_id||!1},url:function(){var e=i.apiHost+"/user/permissions";return this.member_id?e+="/members/"+this.member_id:this.unit_id&&(e+="/units/"+this.unit_id),e},parse:function(e){return e.permissions||[]}});return r}),define("collections/promotions",["jquery","underscore","backbone","config"],function(e,t,n,i){var r=n.Collection.extend({initialize:function(e,t){t=t||{},this.member_id=t.member_id||!1},url:function(){return i.apiHost+"/members/"+this.member_id+"/promotions"},parse:function(e){return e.promotions||[]}});return r}),define("collections/awardings",["jquery","underscore","backbone","config"],function(e,t,n,i){var r=n.Collection.extend({initialize:function(e,t){t=t||{},this.member_id=t.member_id||!1},url:function(){return i.apiHost+"/members/"+this.member_id+"/awardings"},parse:function(e){return e.awardings||[]}});return r}),define("models/event_attendee",["jquery","underscore","backbone"],function(e,t,n){return n.Model.extend({initialize:function(){var e=this.get("attended"),t=this.get("absent")||null,n=this.get("excused");
this.set("attended",null!==e?parseInt(e,10):e),this.set("excused",null!==n?parseInt(n,10):n),null!==t&&this.set("absent",parseInt(t,10))}})}),define("collections/member_attendance",["jquery","underscore","backbone","config","models/event_attendee"],function(e,t,n,i,r){return n.Collection.extend({settings:{limit:15},model:r,initialize:function(e,t){t=t||{},this.member_id=t.member_id||!1,this.skip=0},url:function(){var e=i.apiHost+"/members/"+this.member_id+"/attendance";return this.skip&&(e+="?skip="+this.skip),e},nextPage:function(){return this.skip+=this.settings.limit,this},parse:function(e){return this.more=parseInt(e.count,10)>parseInt(e.skip,10)+e.attendance.length,e.attendance||[]}})}),define("collections/event_attendance",["jquery","underscore","backbone","config","models/event_attendee"],function(e,t,n,i,r){return n.Collection.extend({model:r,initialize:function(e,t){t=t||{},this.id=t.id||null},url:function(){return i.apiHost+"/events/"+this.id+"/excuse"}})}),define("collections/unit_attendance",["jquery","underscore","backbone","config","models/event_attendee"],function(e,t,n,i,r){return n.Collection.extend({settings:{limit:15},model:r,initialize:function(e,t){t=t||{},this.filter=t.filter||!1,this.skip=0},url:function(){var e=i.apiHost+"/units/"+this.filter+"/attendance";return this.skip&&(e+="?skip="+this.skip),e},nextPage:function(){return this.skip+=this.settings.limit,this},parse:function(e){return this.more=parseInt(e.count,10)>parseInt(e.skip,10)+e.attendance.length,e.attendance||[]}})}),define("collections/qualifications",["jquery","underscore","backbone","config"],function(e,t,n,i){var r=n.Collection.extend({initialize:function(e,t){t=t||{},this.member_id=t.member_id||!1},url:function(){return i.apiHost+"/members/"+this.member_id+"/qualifications"},parse:function(e){return e.qualifications||[]}});return r}),define("collections/events",["jquery","underscore","backbone","config"],function(e,t,n,i){var r=n.Collection.extend({initialize:function(e,t){t=t||{},this.from=t.from||!1,this.to=t.to||!1},url:function(){var t=i.apiHost+"/events";return this.from&&this.to&&(t+="?"+e.param({from:this.from,to:this.to})),t},parse:function(e){return e.events||[]}});return r}),define("hbs",["handlebars"],function(e){var t={},n=".hbs";return{load:function(i,r,s,a){var o=a.hbs&&a.hbs.templateExtension?a.hbs.templateExtension:n;if(a.isBuild){var l=nodeRequire("fs"),h=a.dirBaseUrl+"/"+i+o;t[i]=l.readFileSync(h).toString(),s()}else r(["text!"+i+o],function(t){s(e.compile(t))})},write:function(n,i,r){var s=e.precompile(t[i]);r("define('hbs!"+i+"', ['handlebars'], function(Handlebars){ \nreturn Handlebars.template("+s.toString()+");\n});\n")}}}),define("hbs!templates/member",["handlebars"],function(e){return e.template(function(e,t,n,i,r){function s(e){var t,n="";return n+="\r\n                <li>"+p((t=e&&e.position,t=null==t||t===!1?t:t.name,typeof t===u?t.apply(e):t))+', <a href="#units/'+p((t=e&&e.unit,t=null==t||t===!1?t:t.key,typeof t===u?t.apply(e):t))+'">'+p((t=e&&e.unit,t=null==t||t===!1?t:t.name,typeof t===u?t.apply(e):t))+"</a></li>\r\n            "}function a(){return' class="active"'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var o,l,h,c="",u="function",p=this.escapeExpression,d=this,f=n.helperMissing;return c+='<div class="row header">\r\n    <div class="col-sm-1"><img src="images/ranks/60x60/'+p((o=t&&t.rank,o=null==o||o===!1?o:o.filename,typeof o===u?o.apply(t):o))+'.png" title="'+p((o=t&&t.rank,o=null==o||o===!1?o:o.name,typeof o===u?o.apply(t):o))+'"></div>\r\n    <div class="col-sm-9">\r\n        <div class="title">'+p((o=t&&t.rank,o=null==o||o===!1?o:o.name,typeof o===u?o.apply(t):o))+" ",(l=n.full_name)?o=l.call(t,{hash:{},data:r}):(l=t&&t.full_name,o=typeof l===u?l.call(t,{hash:{},data:r}):l),c+=p(o)+'</div>\r\n        <ul class="assignments">\r\n            <li>'+p((o=t&&t.position,o=null==o||o===!1?o:o.name,typeof o===u?o.apply(t):o))+', <a href="#units/'+p((o=t&&t.unit,o=null==o||o===!1?o:o.key,typeof o===u?o.apply(t):o))+'">'+p((o=t&&t.unit,o=null==o||o===!1?o:o.name,typeof o===u?o.apply(t):o))+"</a></li>\r\n            ",o=n.each.call(t,t&&t.assignments,{hash:{},inverse:d.noop,fn:d.program(1,s,r),data:r}),(o||0===o)&&(c+=o),c+='\r\n        </ul>\r\n    </div>\r\n    <div class="col-sm-2" id="admin"></div>\r\n</div>\r\n<div class="row">\r\n    <div class="col-sm-12">\r\n        <ul class="nav nav-tabs">\r\n            <li',l=n.if_eq||t&&t.if_eq,h={hash:{compare:"profile"},inverse:d.noop,fn:d.program(3,a,r),data:r},o=l?l.call(t,t&&t.highlight,h):f.call(t,"if_eq",t&&t.highlight,h),(o||0===o)&&(c+=o),c+=' data-highlight="profile"><a href="#members/',(l=n.id)?o=l.call(t,{hash:{},data:r}):(l=t&&t.id,o=typeof l===u?l.call(t,{hash:{},data:r}):l),c+=p(o)+'">Profile</a></li>\r\n            <li',l=n.if_eq||t&&t.if_eq,h={hash:{compare:"servicerecord"},inverse:d.noop,fn:d.program(3,a,r),data:r},o=l?l.call(t,t&&t.highlight,h):f.call(t,"if_eq",t&&t.highlight,h),(o||0===o)&&(c+=o),c+=' data-highlight="servicerecord"><a href="#members/',(l=n.id)?o=l.call(t,{hash:{},data:r}):(l=t&&t.id,o=typeof l===u?l.call(t,{hash:{},data:r}):l),c+=p(o)+'/servicerecord">Service Record</a></li>\r\n            <li',l=n.if_eq||t&&t.if_eq,h={hash:{compare:"attendance"},inverse:d.noop,fn:d.program(3,a,r),data:r},o=l?l.call(t,t&&t.highlight,h):f.call(t,"if_eq",t&&t.highlight,h),(o||0===o)&&(c+=o),c+=' data-highlight="attendance"><a href="#members/',(l=n.id)?o=l.call(t,{hash:{},data:r}):(l=t&&t.id,o=typeof l===u?l.call(t,{hash:{},data:r}):l),c+=p(o)+'/attendance">Attendance</a></li>\r\n            <li',l=n.if_eq||t&&t.if_eq,h={hash:{compare:"qualifications"},inverse:d.noop,fn:d.program(3,a,r),data:r},o=l?l.call(t,t&&t.highlight,h):f.call(t,"if_eq",t&&t.highlight,h),(o||0===o)&&(c+=o),c+=' data-highlight="qualifications"><a href="#members/',(l=n.id)?o=l.call(t,{hash:{},data:r}):(l=t&&t.id,o=typeof l===u?l.call(t,{hash:{},data:r}):l),c+=p(o)+'/qualifications">Qualifications</a></li>\r\n        </ul>\r\n    </div>\r\n</div>\r\n<div class="row">\r\n    <div class="col-sm-12" id="page"></div>\r\n</div>'})}),define("views/member",["jquery","underscore","backbone","hbs!templates/member","marionette"],function(e,t,n,i){return n.Marionette.Layout.extend({template:i,className:"member",initialize:function(e){e=e||{},this.assignments=e.assignments||{}},modelEvents:{change:"render"},regions:{adminRegion:"#admin",pageRegion:"#page"},onRender:function(){this.model.get("short_name")&&(this.title=this.model.get("short_name"))},setHighlight:function(e){this.highlight=e,this.$(".nav li").removeClass("active"),e&&this.$('.nav li[data-highlight="'+e+'"]').addClass("active")},serializeData:function(){var e=this.model.get("primary_assignment_id"),n=this.assignments.toJSON().filter(function(t){return(null===t.end_date||Date.parse(t.end_date)>=new Date)&&t.id!==e});return t.extend({assignments:n,highlight:this.highlight},this.model.toJSON())}})}),define("hbs!templates/unit",["handlebars"],function(e){return e.template(function(e,t,n,i,r){function s(){return' class="active"'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var a,o,l,h="",c="function",u=this.escapeExpression,p=this,d=n.helperMissing;return h+='<div class="row header">\n    <div class="col-sm-10">\n        <div class="title">',(o=n.name)?a=o.call(t,{hash:{},data:r}):(o=t&&t.name,a=typeof o===c?o.call(t,{hash:{},data:r}):o),h+=u(a)+" <abbr>(",(o=n.abbr)?a=o.call(t,{hash:{},data:r}):(o=t&&t.abbr,a=typeof o===c?o.call(t,{hash:{},data:r}):o),h+=u(a)+')</abbr></div>\n    </div>\n    <div class="col-sm-2" id="admin"></div>\n</div>\n<div class="row">\n    <div class="col-sm-12">\n        <ul class="nav nav-tabs">\n            <li',o=n.if_eq||t&&t.if_eq,l={hash:{compare:"roster"},inverse:p.noop,fn:p.program(1,s,r),data:r},a=o?o.call(t,t&&t.highlight,l):d.call(t,"if_eq",t&&t.highlight,l),(a||0===a)&&(h+=a),h+=' data-highlight="roster"><a href="#units/',(o=n.unit_key)?a=o.call(t,{hash:{},data:r}):(o=t&&t.unit_key,a=typeof o===c?o.call(t,{hash:{},data:r}):o),h+=u(a)+'">Roster</a></li>\n            <li',o=n.if_eq||t&&t.if_eq,l={hash:{compare:"attendance"},inverse:p.noop,fn:p.program(1,s,r),data:r},a=o?o.call(t,t&&t.highlight,l):d.call(t,"if_eq",t&&t.highlight,l),(a||0===a)&&(h+=a),h+=' data-highlight="attendance"><a href="#units/',(o=n.unit_key)?a=o.call(t,{hash:{},data:r}):(o=t&&t.unit_key,a=typeof o===c?o.call(t,{hash:{},data:r}):o),h+=u(a)+'/attendance">Attendance</a></li>\n            <!--<li',o=n.if_eq||t&&t.if_eq,l={hash:{compare:"qualifications"},inverse:p.noop,fn:p.program(1,s,r),data:r},a=o?o.call(t,t&&t.highlight,l):d.call(t,"if_eq",t&&t.highlight,l),(a||0===a)&&(h+=a),h+=' data-highlight="qualifications"><a href="#members/',(o=n.unit_key)?a=o.call(t,{hash:{},data:r}):(o=t&&t.unit_key,a=typeof o===c?o.call(t,{hash:{},data:r}):o),h+=u(a)+'/qualifications">Qualifications</a></li>-->\n        </ul>\n    </div>\n</div>\n<div class="row">\n    <div class="col-sm-12" id="page"></div>\n</div>'})}),define("views/unit",["jquery","underscore","backbone","hbs!templates/unit","marionette"],function(e,t,n,i){return n.Marionette.Layout.extend({template:i,className:"unit",initialize:function(e){e=e||{}},modelEvents:{change:"render"},regions:{adminRegion:"#admin",pageRegion:"#page"},setHighlight:function(e){this.highlight=e,this.$(".nav li").removeClass("active"),e&&this.$('.nav li[data-highlight="'+e+'"]').addClass("active")},serializeData:function(){return t.extend({highlight:this.highlight},this.collection.at(0).toJSON())}})}),define("hbs!templates/roster",["handlebars"],function(e){return e.template(function(e,t,n,i,r){function s(e,t){var i,r="";return r+="\r\n    ",i=n.each.call(e,e&&e.members,{hash:{},inverse:m.noop,fn:m.program(2,a,t),data:t}),(i||0===i)&&(r+=i),r+="\r\n"}function a(e,t){var i,r="";return r+='\r\n    <div class="row">\r\n        <div class="col-xs-2 col-sm-1">',i=n["if"].call(e,(i=e&&e.rank,null==i||i===!1?i:i.filename),{hash:{},inverse:m.noop,fn:m.program(3,o,t),data:t}),(i||0===i)&&(r+=i),r+='</div>\r\n        <div class="col-xs-10 col-sm-3"><a href="#members/'+d((i=e&&e.id,typeof i===p?i.apply(e):i))+'">'+d((i=e&&e.short_name,typeof i===p?i.apply(e):i))+'</a></div>\r\n        <div class="col-xs-12 col-sm-7">'+d((i=e&&e.position,i=null==i||i===!1?i:i.name,typeof i===p?i.apply(e):i))+'</div>\r\n        <div class="hidden-xs col-sm-1">',i=n["if"].call(e,(i=e&&e.country,null==i||i===!1?i:i.abbr),{hash:{},inverse:m.noop,fn:m.program(5,l,t),data:t}),(i||0===i)&&(r+=i),r+="</div>\r\n    </div>\r\n    "}function o(e){var t,n="";return n+='<img src="images/ranks/16x16/'+d((t=e&&e.rank,t=null==t||t===!1?t:t.filename,typeof t===p?t.apply(e):t))+'.png" title="'+d((t=e&&e.rank,t=null==t||t===!1?t:t.name,typeof t===p?t.apply(e):t))+'">'}function l(e,t){var i,r,s,a="";return a+='<img src="images/countries/'+d((r=n.toLowerCase||e&&e.toLowerCase,s={hash:{},data:t},r?r.call(e,(i=e&&e.country,null==i||i===!1?i:i.abbr),s):f.call(e,"toLowerCase",(i=e&&e.country,null==i||i===!1?i:i.abbr),s)))+'.png" title="'+d((i=e&&e.country,i=null==i||i===!1?i:i.name,typeof i===p?i.apply(e):i))+'">'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var h,c,u="",p="function",d=this.escapeExpression,f=n.helperMissing,m=this;return u+='<div class="row header-row">\r\n    <div class="col-sm-12 header">',(c=n.name)?h=c.call(t,{hash:{},data:r}):(c=t&&t.name,h=typeof c===p?c.call(t,{hash:{},data:r}):c),u+=d(h)+'</div>\r\n</div>\r\n<div class="row">\r\n    <div class="col-xs-8 col-sm-4 abbr">',(c=n.abbr)?h=c.call(t,{hash:{},data:r}):(c=t&&t.abbr,h=typeof c===p?c.call(t,{hash:{},data:r}):c),u+=d(h)+'</div>\r\n    <div class="col-xs-4 col-sm-8 count">('+d((h=t&&t.members,h=null==h||h===!1?h:h.length,typeof h===p?h.apply(t):h))+")</div>\r\n</div>\r\n",h=n["if"].call(t,(h=t&&t.members,null==h||h===!1?h:h.length),{hash:{},inverse:m.noop,fn:m.program(1,s,r),data:r}),(h||0===h)&&(u+=h),u})}),define("hbs!templates/roster_attendance",["handlebars"],function(e){return e.template(function(e,t,n,i,r){function s(e,t){var i,r="";return r+="\r\n    ",i=n.each.call(e,e&&e.members,{hash:{},inverse:f.noop,fn:f.program(2,a,t),data:t}),(i||0===i)&&(r+=i),r+="\r\n"}function a(e,t){var i,r="";return r+='\r\n    <div class="row">\r\n        <div class="col-xs-12 col-sm-12">\r\n                <label>\r\n                    <input type="checkbox" name="attendance" value="'+d((i=e&&e.id,typeof i===p?i.apply(e):i))+'"',i=n["if"].call(e,e&&e.attended,{hash:{},inverse:f.noop,fn:f.program(3,o,t),data:t}),(i||0===i)&&(r+=i),r+='>\r\n                    <a href="#members/'+d((i=e&&e.id,typeof i===p?i.apply(e):i))+'">'+d((i=e&&e.short_name,typeof i===p?i.apply(e):i))+"</a>\r\n                    ",i=n["if"].call(e,e&&e.excused,{hash:{},inverse:f.noop,fn:f.program(5,l,t),data:t}),(i||0===i)&&(r+=i),r+="\r\n                </label>\r\n        </div>\r\n    </div>\r\n    "}function o(){return' checked="checked"'}function l(){return'<span class="label label-warning">Excused</span>'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var h,c,u="",p="function",d=this.escapeExpression,f=this;return u+='<div class="row header-row">\r\n    <div class="col-sm-12 header">',(c=n.name)?h=c.call(t,{hash:{},data:r}):(c=t&&t.name,h=typeof c===p?c.call(t,{hash:{},data:r}):c),u+=d(h)+'</div>\r\n</div>\r\n<div class="row">\r\n    <div class="col-xs-12 col-sm-12 abbr">',(c=n.abbr)?h=c.call(t,{hash:{},data:r}):(c=t&&t.abbr,h=typeof c===p?c.call(t,{hash:{},data:r}):c),u+=d(h)+" ("+d((h=t&&t.members,h=null==h||h===!1?h:h.length,typeof h===p?h.apply(t):h))+")</div>\r\n</div>\r\n",h=n["if"].call(t,(h=t&&t.members,null==h||h===!1?h:h.length),{hash:{},inverse:f.noop,fn:f.program(1,s,r),data:r}),(h||0===h)&&(u+=h),u})}),define("views/roster",["jquery","underscore","backbone","marionette","handlebars","hbs!templates/roster","hbs!templates/roster_attendance","marionette"],function(e,t,n,i,r,s,a){var o=n.Marionette.CompositeView.extend({template:s,tagName:"div",initialize:function(e){e=e||{},this.itemViewOptions=this.itemViewOptions||{},e.eventAttendance&&(this.eventAttendance=e.eventAttendance,this.itemViewOptions.eventAttendance=e.eventAttendance),e.attendance&&(this.template=a,this.itemViewOptions.attendance=!0),this.collection=this.model.get("children"),this.$el.addClass("unit").addClass("depth-"+this.model.get("depth"))},appendHtml:function(e,t){this.$el.append(t.el)},onBeforeRender:function(){t.isEmpty(this.eventAttendance)||(eventAttendance=this.eventAttendance,t.each(this.model.get("members"),function(e){var t=eventAttendance.find(function(t){return t.get("member").id===e.id});t&&(e.attended=t.get("attended"),e.excused=t.get("excused"))}))}}),l=n.Marionette.CollectionView.extend({itemView:o,title:"Roster",className:"roster",initialize:function(e){e=e||{},this.itemViewOptions=this.itemViewOptions||{},e.attendance&&(this.itemViewOptions.attendance=!0),e.eventAttendance&&(this.itemViewOptions.eventAttendance=e.eventAttendance)}});return l}),define("hbs!templates/nav",["handlebars"],function(e){return e.template(function(e,t,n,i,r){function s(){return' class="active"'}function a(e,t){var i,r="";return r+='\n    <li><a href="#">',i=n["if"].call(e,e&&e.short_name,{hash:{},inverse:d.noop,fn:d.program(4,o,t),data:t}),(i||0===i)&&(r+=i),r+="Enlist</a></li>\n    "}function o(){return"Re-"}function l(e,t){var i,r,s="";return s+='\n    <li class="dropdown">\n        <a href="#" class="dropdown-toggle" data-toggle="dropdown">',(r=n.short_name)?i=r.call(e,{hash:{},data:t}):(r=e&&e.short_name,i=typeof r===f?r.call(e,{hash:{},data:t}):r),s+=m(i)+' <b class="caret"></b></a>\n        <ul class="dropdown-menu">\n            <li><a href="#members/',(r=n.id)?i=r.call(e,{hash:{},data:t}):(r=e&&e.id,i=typeof r===f?r.call(e,{hash:{},data:t}):r),s+=m(i)+'">Personnel File</a></li>\n            <li><a href="http://29th.org/forums/index.php?action=profile;u=',(r=n.id)?i=r.call(e,{hash:{},data:t}):(r=e&&e.id,i=typeof r===f?r.call(e,{hash:{},data:t}):r),s+=m(i)+'">Forum Profile</a></li>\n        </ul>\n    </li>\n    '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var h,c,u,p="",d=this,f="function",m=this.escapeExpression,g=n.helperMissing;return p+='<ul class="nav navbar-nav">\n    <li',c=n.if_eq||t&&t.if_eq,u={hash:{compare:"roster"},inverse:d.noop,fn:d.program(1,s,r),data:r},h=c?c.call(t,t&&t.highlight,u):g.call(t,"if_eq",t&&t.highlight,u),(h||0===h)&&(p+=h),p+=' data-highlight="roster"><a href="#">Roster</a></li>\n    <li',c=n.if_eq||t&&t.if_eq,u={hash:{compare:"calendar"},inverse:d.noop,fn:d.program(1,s,r),data:r},h=c?c.call(t,t&&t.highlight,u):g.call(t,"if_eq",t&&t.highlight,u),(h||0===h)&&(p+=h),p+=' data-highlight="calendar"><a href="#calendar">Calendar</a></li>\n</ul>\n<ul class="nav navbar-nav navbar-right">\n    ',h=n.unless.call(t,t&&t.classes,{hash:{},inverse:d.noop,fn:d.program(3,a,r),data:r}),(h||0===h)&&(p+=h),p+="\n    \n    ",h=n["if"].call(t,t&&t.short_name,{hash:{},inverse:d.noop,fn:d.program(6,l,r),data:r}),(h||0===h)&&(p+=h),p+="\n</ul>"})}),define("views/nav",["jquery","underscore","backbone","hbs!templates/nav","marionette"],function(e,t,n,i){return n.Marionette.ItemView.extend({template:i,highlight:"home",modelEvents:{change:"render"},setHighlight:function(e){this.highlight=e,this.$(".nav li").removeClass("active"),e&&this.$('.nav li[data-highlight="'+e+'"]').addClass("active")},serializeData:function(){return t.extend({highlight:this.highlight},this.model.toJSON())}})}),define("hbs!templates/member_admin",["handlebars"],function(e){return e.template(function(e,t,n,i,r){function s(e,t){var i,r,s,h="";return h+='\r\n<div class="btn-group pull-right">\r\n    <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">\r\n        Admin <span class="caret"></span>\r\n    </button>\r\n    <ul class="dropdown-menu" role="menu">\r\n        ',r=n.if_inarray||e&&e.if_inarray,s={hash:{compare:e&&e.items},inverse:p.noop,fn:p.program(2,a,t),data:t},i=r?r.call(e,"profile_edit",s):d.call(e,"if_inarray","profile_edit",s),(i||0===i)&&(h+=i),h+="\r\n        \r\n        ",r=n.if_inarray||e&&e.if_inarray,s={hash:{compare:e&&e.items},inverse:p.noop,fn:p.program(4,o,t),data:t},i=r?r.call(e,"promotion_add",s):d.call(e,"if_inarray","promotion_add",s),(i||0===i)&&(h+=i),h+="\r\n        \r\n        ",r=n.if_inarray||e&&e.if_inarray,s={hash:{compare:e&&e.items},inverse:p.noop,fn:p.program(6,l,t),data:t},i=r?r.call(e,"discharge",s):d.call(e,"if_inarray","discharge",s),(i||0===i)&&(h+=i),h+="\r\n    </ul>\r\n</div>\r\n"}function a(e,t){var i,r,s="";return s+='\r\n            <li><a href="#members/',(r=n.member_id)?i=r.call(e,{hash:{},data:t}):(r=e&&e.member_id,i=typeof r===c?r.call(e,{hash:{},data:t}):r),s+=u(i)+'/modify">Modify Profile</a></li>\r\n        '}function o(){return'\r\n            <li><a href="#">Promote</a></li>\r\n        '}function l(){return'\r\n            <li><a href="#">Discharge</a></li>\r\n        '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var h,c="function",u=this.escapeExpression,p=this,d=n.helperMissing;return h=n["if"].call(t,t&&t.items,{hash:{},inverse:p.noop,fn:p.program(1,s,r),data:r}),h||0===h?h:""})}),define("views/member_admin",["jquery","underscore","backbone","hbs!templates/member_admin","marionette"],function(e,t,n,i){var r=n.Marionette.ItemView.extend({template:i,serializeData:function(){return{member_id:this.collection.member_id,items:this.collection.pluck("abbr")}}});return r}),define("hbs!templates/member_profile",["handlebars"],function(e){return e.template(function(e,t,n,i,r){function s(e,t){var i,r,s,a="";return a+='<img src="images/countries/'+u((r=n.toLowerCase||e&&e.toLowerCase,s={hash:{},data:t},r?r.call(e,(i=e&&e.country,null==i||i===!1?i:i.abbr),s):c.call(e,"toLowerCase",(i=e&&e.country,null==i||i===!1?i:i.abbr),s)))+'.png" title="'+u((i=e&&e.country,i=null==i||i===!1?i:i.name,typeof i===p?i.apply(e):i))+'">'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var a,o,l,h="",c=n.helperMissing,u=this.escapeExpression,p="function",d=this;return h+='<table class="table">\r\n    <tr>\r\n        <th>Active Class</th>\r\n        <td>'+u((o=n.join||t&&t.join,l={hash:{delimiter:", "},data:r},o?o.call(t,t&&t.classes,l):c.call(t,"join",t&&t.classes,l)))+"</td>\r\n    </tr>\r\n    <tr>\r\n        <th>Country</th>\r\n        <td>\r\n            ",a=n["if"].call(t,(a=t&&t.country,null==a||a===!1?a:a.abbr),{hash:{},inverse:d.noop,fn:d.program(1,s,r),data:r}),(a||0===a)&&(h+=a),h+="\r\n            "+u((a=t&&t.country,a=null==a||a===!1?a:a.name,typeof a===p?a.apply(t):a))+"\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <th>ROID</th>\r\n        <td>",(o=n.steam_id)?a=o.call(t,{hash:{},data:r}):(o=t&&t.steam_id,a=typeof o===p?o.call(t,{hash:{},data:r}):o),h+=u(a)+"</td>\r\n    </tr>\r\n</table>"})}),define("views/member_profile",["jquery","underscore","backbone","hbs!templates/member_profile","marionette"],function(e,t,n,i){var r=n.Marionette.ItemView.extend({template:i});return r}),define("hbs!templates/member_modify",["handlebars"],function(e){return e.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var s,a,o="",l="function",h=this.escapeExpression;return o+='<form role="form">\r\n    <div class="form-group">\r\n        <label for="first_name">First Name</label>\r\n        <input type="text" class="form-control" id="first_name" name="first_name" value="',(a=n.first_name)?s=a.call(t,{hash:{},data:r}):(a=t&&t.first_name,s=typeof a===l?a.call(t,{hash:{},data:r}):a),o+=h(s)+'">\r\n    </div>\r\n    \r\n    <div class="form-group">\r\n        <label for="middle_name">Middle Name</label>\r\n        <input type="text" class="form-control" id="middle_name" name="middle_name" value="',(a=n.middle_name)?s=a.call(t,{hash:{},data:r}):(a=t&&t.middle_name,s=typeof a===l?a.call(t,{hash:{},data:r}):a),o+=h(s)+'">\r\n    </div>\r\n    \r\n    <div class="form-group">\r\n        <label for="last_name">Last Name</label>\r\n        <input type="text" class="form-control" id="last_name" name="last_name" value="',(a=n.last_name)?s=a.call(t,{hash:{},data:r}):(a=t&&t.last_name,s=typeof a===l?a.call(t,{hash:{},data:r}):a),o+=h(s)+'">\r\n    </div>\r\n    \r\n    <div class="form-group">\r\n        <label for="steam_id">Steam ID</label>\r\n        <input type="text" class="form-control" id="steam_id" name="steam_id" value="',(a=n.steam_id)?s=a.call(t,{hash:{},data:r}):(a=t&&t.steam_id,s=typeof a===l?a.call(t,{hash:{},data:r}):a),o+=h(s)+'">\r\n    </div>\r\n    \r\n    <button type="submit" class="btn btn-default">Submit</button>\r\n</form>'})}),define("views/member_modify",["jquery","underscore","backbone","hbs!templates/member_modify","marionette"],function(e,t,n,i){var r=n.Marionette.ItemView.extend({template:i,initialize:function(){t.bindAll(this,"onFormSubmit")},events:{"submit form":"onFormSubmit"},onFormSubmit:function(t){t.preventDefault(),console.log(e(t.currentTarget).serializeObject()),this.model.save(e(t.currentTarget).serializeObject(),{type:"POST",patch:!0,error:function(){console.log("ERROR!!!")}})}});return r}),define("hbs!templates/service_record",["handlebars"],function(e){return e.template(function(e,t,n,i,r){function s(e,t){var i,r,s,h="";return h+="\r\n    <h3>",r=n.unless_eq||e&&e.unless_eq,s={hash:{compare:"undefined"},inverse:g.program(4,o,t),fn:g.program(2,a,t),data:t},i=r?r.call(e,e&&e.date,s):d.call(e,"unless_eq",e&&e.date,s),(i||0===i)&&(h+=i),h+="</h3>\r\n    ",i=n.each.call(e,e&&e.items,{hash:{},inverse:g.noop,fn:g.program(6,l,t),data:t}),(i||0===i)&&(h+=i),h+="\r\n"}function a(e,t){var i,r;return f((i=n.dateFormat||e&&e.dateFormat,r={hash:{format:"ll"},data:t},i?i.call(e,e&&e.date,r):d.call(e,"dateFormat",e&&e.date,r)))}function o(){return"Unknown"}function l(e,t){var i,r="";return r+="\r\n        ",i=n["if"].call(e,e&&e.position,{hash:{},inverse:g.noop,fn:g.program(7,h,t),data:t}),(i||0===i)&&(r+=i),r+="\r\n        ",i=n["if"].call(e,e&&e.new_rank,{hash:{},inverse:g.noop,fn:g.program(9,c,t),data:t}),(i||0===i)&&(r+=i),r+="\r\n        ",i=n["if"].call(e,e&&e.award,{hash:{},inverse:g.noop,fn:g.program(11,u,t),data:t}),(i||0===i)&&(r+=i),r+="\r\n    "}function h(e){var t,n="";return n+='\r\n            <li>Assigned to <a href="#/units/'+f((t=e&&e.unit,t=null==t||t===!1?t:t.key,typeof t===m?t.apply(e):t))+'">'+f((t=e&&e.unit,t=null==t||t===!1?t:t.abbr,typeof t===m?t.apply(e):t))+"</a> as a "+f((t=e&&e.position,t=null==t||t===!1?t:t.name,typeof t===m?t.apply(e):t))+"</li>\r\n        "}function c(e){var t,n="";return n+="\r\n            <li>Promoted to "+f((t=e&&e.new_rank,t=null==t||t===!1?t:t.name,typeof t===m?t.apply(e):t))+"</li>\r\n        "}function u(e){var t,n="";return n+="\r\n            <li>Awarded "+f((t=e&&e.award,t=null==t||t===!1?t:t.name,typeof t===m?t.apply(e):t))+"</li>\r\n        "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var p,d=n.helperMissing,f=this.escapeExpression,m="function",g=this;return p=n.each.call(t,t&&t.items,{hash:{},inverse:g.noop,fn:g.program(1,s,r),data:r}),p||0===p?p:""})}),define("views/service_record",["jquery","underscore","backbone","hbs!templates/service_record","marionette"],function(e,t,n,i){var r=n.Marionette.ItemView.extend({template:i,initialize:function(e){e=e||{},this.assignments=e.assignments||!1,this.promotions=e.promotions||!1,this.awardings=e.awardings||!1},serializeData:function(){var e=[],n=t.groupBy(this.assignments.toJSON().concat(this.promotions.toJSON(),this.awardings.toJSON()),function(e){return e.start_date||e.date});return t.each(n,function(t,n){e.push({date:n,items:t})}),e.sort(function(e,t){return e.date<t.date?1:t.date<e.date?-1:0}),{items:e}}});return r}),define("hbs!templates/member_attendance",["handlebars"],function(e){return e.template(function(e,t,n,i,r){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{},'<table class="table">\r\n    <thead>\r\n        <tr>\r\n            <th>Date</th>\r\n            <th>Unit</th>\r\n            <th>Type</th>\r\n            <th>Status</th>\r\n        </tr>\r\n    </thead>\r\n    <tbody id="rows"></tbody>\r\n</table>\r\n\r\n<button class="btn btn-large btn-block more" type="button" data-loading-text="Loading" data-error-text="Error">More</button>'})}),define("hbs!templates/member_attendance_item",["handlebars"],function(e){return e.template(function(e,t,n,i,r){function s(){return'<span class="label label-info">Mandatory</span>'}function a(){return"\r\n    Attended\r\n"}function o(e,t){var i,r="";return r+="\r\n    ",i=n["if"].call(e,e&&e.excused,{hash:{},inverse:f.program(8,h,t),fn:f.program(6,l,t),data:t}),(i||0===i)&&(r+=i),r+="\r\n"}function l(){return"\r\n        Excused\r\n    "}function h(){return"\r\n        AWOL\r\n    "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var c,u,p,d="",f=this,m="function",g=this.escapeExpression,v=n.helperMissing;return d+='<td><a href="#events/'+g((c=t&&t.event,c=null==c||c===!1?c:c.id,typeof c===m?c.apply(t):c))+'">'+g((u=n.dateFormat||t&&t.dateFormat,p={hash:{format:"ll HH:mm"},data:r},u?u.call(t,(c=t&&t.event,null==c||c===!1?c:c.datetime),p):v.call(t,"dateFormat",(c=t&&t.event,null==c||c===!1?c:c.datetime),p)))+'</a></td>\r\n<td><a href="#units/'+g((c=t&&t.unit,c=null==c||c===!1?c:c.key,typeof c===m?c.apply(t):c))+'">'+g((c=t&&t.unit,c=null==c||c===!1?c:c.abbr,typeof c===m?c.apply(t):c))+"</a></td>\r\n<td>\r\n    ",c=n["if"].call(t,(c=t&&t.event,null==c||c===!1?c:c.mandatory),{hash:{},inverse:f.noop,fn:f.program(1,s,r),data:r}),(c||0===c)&&(d+=c),d+="\r\n    "+g((c=t&&t.event,c=null==c||c===!1?c:c.type,typeof c===m?c.apply(t):c))+"\r\n</td>\r\n<td>\r\n",c=n["if"].call(t,t&&t.attended,{hash:{},inverse:f.program(5,o,r),fn:f.program(3,a,r),data:r}),(c||0===c)&&(d+=c),d+="\r\n</td>"})}),define("views/member_attendance",["jquery","underscore","backbone","hbs!templates/member_attendance","hbs!templates/member_attendance_item","marionette"],function(e,t,n,i,r){var s=n.Marionette.ItemView.extend({template:r,tagName:"tr"}),a=n.Marionette.CompositeView.extend({template:i,itemView:s,itemViewContainer:"#rows",_initialEvents:function(){this.once("render",function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this._renderChildren,this))},this)},initialize:function(){t.bindAll(this,"onClickMore")},events:{"click .more":"onClickMore"},onRender:function(){this.checkMoreButton()},onClickMore:function(t){t.preventDefault();var n=this,i=e(t.currentTarget);i.button("loading"),this.collection.nextPage().fetch({remove:!1,success:function(){i.button("reset"),n.checkMoreButton()},error:function(){i.button("error")}})},checkMoreButton:function(){this.$(".more").toggle(this.collection.more)}});return a}),define("hbs!templates/unit_attendance",["handlebars"],function(e){return e.template(function(e,t,n,i,r){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{},'<table class="table">\n    <thead>\n        <tr>\n            <th>Date</th>\n            <th>Unit</th>\n            <th>Type</th>\n            <th>Attended</th>\n            <th>AWOLs</th>\n        </tr>\n    </thead>\n    <tbody id="rows"></tbody>\n</table>\n\n<button class="btn btn-large btn-block more" type="button" data-loading-text="Loading" data-error-text="Error">More</button>'})}),define("hbs!templates/unit_attendance_item",["handlebars"],function(e){return e.template(function(e,t,n,i,r){function s(){return'<span class="label label-info">Mandatory</span>'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var a,o,l,h="",c="function",u=this.escapeExpression,p=n.helperMissing,d=this;return h+='<td><a href="#events/'+u((a=t&&t.event,a=null==a||a===!1?a:a.id,typeof a===c?a.apply(t):a))+'">'+u((o=n.dateFormat||t&&t.dateFormat,l={hash:{format:"ll HH:mm"},data:r},o?o.call(t,(a=t&&t.event,null==a||a===!1?a:a.datetime),l):p.call(t,"dateFormat",(a=t&&t.event,null==a||a===!1?a:a.datetime),l)))+'</a></td>\n<td><a href="#units/'+u((a=t&&t.unit,a=null==a||a===!1?a:a.key,typeof a===c?a.apply(t):a))+'">'+u((a=t&&t.unit,a=null==a||a===!1?a:a.abbr,typeof a===c?a.apply(t):a))+"</a></td>\n<td>\n    ",a=n["if"].call(t,(a=t&&t.event,null==a||a===!1?a:a.mandatory),{hash:{},inverse:d.noop,fn:d.program(1,s,r),data:r}),(a||0===a)&&(h+=a),h+="\n    "+u((a=t&&t.event,a=null==a||a===!1?a:a.type,typeof a===c?a.apply(t):a))+"\n</td>\n<td>",(o=n.attended)?a=o.call(t,{hash:{},data:r}):(o=t&&t.attended,a=typeof o===c?o.call(t,{hash:{},data:r}):o),h+=u(a)+" / "+u((o=n.add||t&&t.add,l={hash:{},data:r},o?o.call(t,t&&t.attended,t&&t.absent,l):p.call(t,"add",t&&t.attended,t&&t.absent,l)))+"</td>\n<td>"+u((o=n.subtract||t&&t.subtract,l={hash:{},data:r},o?o.call(t,t&&t.absent,t&&t.excused,l):p.call(t,"subtract",t&&t.absent,t&&t.excused,l)))+"</td>"})}),define("views/unit_attendance",["jquery","underscore","backbone","hbs!templates/unit_attendance","hbs!templates/unit_attendance_item","marionette"],function(e,t,n,i,r){var s=n.Marionette.ItemView.extend({template:r,tagName:"tr"});return n.Marionette.CompositeView.extend({template:i,itemView:s,itemViewContainer:"#rows",_initialEvents:function(){this.once("render",function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this._renderChildren,this))},this)},initialize:function(){t.bindAll(this,"onClickMore")},events:{"click .more":"onClickMore"},onRender:function(){this.checkMoreButton()},onClickMore:function(t){t.preventDefault();var n=this,i=e(t.currentTarget);i.button("loading"),this.collection.nextPage().fetch({remove:!1,success:function(){i.button("reset"),n.checkMoreButton()},error:function(){i.button("error")}})},checkMoreButton:function(){this.$(".more").toggle(this.collection.more)
}})}),define("hbs!templates/qualifications",["handlebars"],function(e){return e.template(function(e,t,n,i,r){function s(e,t){var i,r="";return r+="\r\n    <h1>"+d((i=null==t||t===!1?t:t.key,typeof i===p?i.apply(e):i))+"</h1>\r\n    ",i=n.each.call(e,e,{hash:{},inverse:f.noop,fn:f.program(2,a,t),data:t}),(i||0===i)&&(r+=i),r+="\r\n"}function a(e,t){var i,r,s,a="";return a+="\r\n        ",r=n.unless_eq||e&&e.unless_eq,s={hash:{compare:"N/A"},inverse:f.noop,fn:f.program(3,o,t),data:t},i=r?r.call(e,null==t||t===!1?t:t.key,s):m.call(e,"unless_eq",null==t||t===!1?t:t.key,s),(i||0===i)&&(a+=i),a+="\r\n        <ul>\r\n        ",i=n.each.call(e,e,{hash:{},inverse:f.noop,fn:f.program(5,l,t),data:t}),(i||0===i)&&(a+=i),a+="\r\n        </ul>\r\n    "}function o(e,t){var n,i="";return i+="<h3>"+d((n=null==t||t===!1?t:t.key,typeof n===p?n.apply(e):n))+"</h3>"}function l(e,t){var i,r="";return r+='\r\n            <li style="list-style-type: none">\r\n                ',i=n["if"].call(e,(i=e&&e.qualification,null==i||i===!1?i:i.id),{hash:{},inverse:f.program(8,c,t),fn:f.program(6,h,t),data:t}),(i||0===i)&&(r+=i),r+="\r\n                "+d((i=e&&e.description,typeof i===p?i.apply(e):i))+"\r\n            </li>\r\n        "}function h(){return'\r\n                    <span class="glyphicon glyphicon-check"></span>\r\n                '}function c(){return'\r\n                    <span class="glyphicon glyphicon-unchecked"></span>\r\n                '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var u,p="function",d=this.escapeExpression,f=this,m=n.helperMissing;return u=n.each.call(t,t&&t.items,{hash:{},inverse:f.noop,fn:f.program(1,s,r),data:r}),u||0===u?u:""})}),define("views/qualifications",["jquery","underscore","backbone","hbs!templates/qualifications","marionette"],function(e,t,n,i){var r=n.Marionette.ItemView.extend({template:i,serializeData:function(){var e=this.collection.toJSON(),n={};return t.each(e,function(e){void 0===n[e.weapon]&&(n[e.weapon]={}),void 0===n[e.weapon][e.badge]&&(n[e.weapon][e.badge]=[]),n[e.weapon][e.badge].push(e)}),{items:n}}});return r}),define("hbs!templates/calendar",["handlebars"],function(e){return e.template(function(e,t,n,i,r){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{},'<div id="calendar"></div>'})}),define("views/calendar",["jquery","underscore","backbone","util","hbs!templates/calendar","marionette"],function(e,t,n,i,r){var s=n.Marionette.ItemView.extend({template:r,className:"calendar",title:"Calendar",settings:{calendar:{header:{left:"prev,next today",center:"title",right:"month,basicWeek,basicDay",ignoreTimezone:!1},buttonText:{prev:'<i class="glyphicon glyphicon-arrow-left"></i>',next:'<i class="glyphicon glyphicon-arrow-right"></i>'},eventClick:function(e){n.history.navigate("#events/"+e.id,{trigger:!0})},eventDataTransform:function(e){return{id:e.id,title:window.moment(e.datetime).format("HH:mm")+" "+(e.unit.key?e.unit.key:e.type),start:e.datetime,backgroundColor:e.user_expected?"#5cb85c":"#3a87ad"}},loading:function(e){i.loading(e)}}},initialize:function(){t.bindAll(this,"getEvents"),this.settings.calendar.events=this.getEvents},onShow:function(){this.$("#calendar").fullCalendar(this.settings.calendar)},getEvents:function(t,n,i){var r=this;this.collection.from=Math.round(t.getTime()/1e3),this.collection.to=Math.round(n.getTime()/1e3),e.when(this.collection.fetch()).done(function(){var e=r.collection.toJSON().map(function(e){return e.user_expected=r.isExpected(e),e});i(e)})},isExpected:function(e){var t=!1;return this.options.userAssignments.length&&e.unit.id&&this.options.userAssignments.any(function(n){return n.get("path_array")||n.set("path_array",n.get("unit").path.split("/").map(function(e){return e?parseInt(e,10):void 0})),n.get("unit").id===e.unit.id||n.get("path_array").indexOf(e.unit.id)>-1?(t=!0,!0):void 0}),t}});return s}),define("hbs!templates/event",["handlebars"],function(e){return e.template(function(e,t,n,i,r){function s(){return" Mandatory "}function a(){return" Non-Mandatory "}function o(e){var t;return y((t=e&&e.server,t=null==t||t===!1?t:t.name,typeof t===b?t.apply(e):t))}function l(e,t){var i,r="";return r+='\n            <div id="loa-buttons" class="',i=n["if"].call(e,(i=e&&e.user_rsvp,null==i||i===!1?i:i.excused),{hash:{},inverse:x.program(10,c,t),fn:x.program(8,h,t),data:t}),(i||0===i)&&(r+=i),r+='">\n                <button type="button" class="btn btn-default pull-right" id="loa-cancel"><span class="glyphicon glyphicon-minus-sign"></span> Cancel LOA</button>\n                <button type="button" class="btn btn-default pull-right" id="loa-post"><span class="glyphicon glyphicon-plus-sign"></span> Post LOA</button>\n            </div>\n            \n        '}function h(){return"loa-cancel"}function c(){return"loa-post"}function u(e,t){var i,r,s="";return s+='\n            <a href="#events/',(r=n.id)?i=r.call(e,{hash:{},data:t}):(r=e&&e.id,i=typeof r===b?r.call(e,{hash:{},data:t}):r),s+=y(i)+'/aar" class="btn btn-default pull-right"><span class="glyphicon glyphicon-list"></span> Post AAR</a>\n        '}function p(){return"You are expected to attend"}function d(e,t){var i,r,s="";return s+="\n<blockquote>",(r=n.report)?i=r.call(e,{hash:{},data:t}):(r=e&&e.report,i=typeof r===b?r.call(e,{hash:{},data:t}):r),s+=y(i)+"</blockquote>\n"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var f,m,g,v="",b="function",y=this.escapeExpression,x=this,w=n.helperMissing;return v+='<div class="row header">\n    <div class="col-sm-8">\n        <h1>'+y((f=t&&t.unit,f=null==f||f===!1?f:f.key,typeof f===b?f.apply(t):f))+" ",(m=n.type)?f=m.call(t,{hash:{},data:r}):(m=t&&t.type,f=typeof m===b?m.call(t,{hash:{},data:r}):m),v+=y(f)+"</h1>\n        <h2>"+y((m=n.dateFormat||t&&t.dateFormat,g={hash:{format:"ll HH:mm"},data:r},m?m.call(t,t&&t.datetime,g):w.call(t,"dateFormat",t&&t.datetime,g)))+" <small>",f=n["if"].call(t,t&&t.mandatory,{hash:{},inverse:x.program(3,a,r),fn:x.program(1,s,r),data:r}),(f||0===f)&&(v+=f),v+="</small></h2>\n        <h3>",f=n["if"].call(t,(f=t&&t.server,null==f||f===!1?f:f.name),{hash:{},inverse:x.noop,fn:x.program(5,o,r),data:r}),(f||0===f)&&(v+=f),v+='</h3>\n    </div>\n    <div class="col-sm-4">\n        ',f=n["if"].call(t,t&&t.user_expected,{hash:{},inverse:x.noop,fn:x.program(7,l,r),data:r}),(f||0===f)&&(v+=f),v+="\n        ",m=n.if_inarray||t&&t.if_inarray,g={hash:{compare:t&&t.items},inverse:x.noop,fn:x.program(12,u,r),data:r},f=m?m.call(t,"event_aar",g):w.call(t,"if_inarray","event_aar",g),(f||0===f)&&(v+=f),v+="\n    </div>\n</div>\n",f=n["if"].call(t,t&&t.user_expected,{hash:{},inverse:x.noop,fn:x.program(14,p,r),data:r}),(f||0===f)&&(v+=f),v+="\n\n",f=n["if"].call(t,t&&t.report,{hash:{},inverse:x.noop,fn:x.program(16,d,r),data:r}),(f||0===f)&&(v+=f),v+='\n\n<ul id="attendance"></ul>'})}),define("hbs!templates/event_attendee",["handlebars"],function(e){return e.template(function(e,t,n,i,r){function s(e,t){var i,r="";return r+="\r\n        ",i=n["if"].call(e,e&&e.excused,{hash:{},inverse:c.program(4,o,t),fn:c.program(2,a,t),data:t}),(i||0===i)&&(r+=i),r+="\r\n    "}function a(){return'\r\n            <span class="label label-warning">Excused</span>\r\n        '}function o(){return'\r\n            <span class="label label-danger">AWOL</span>\r\n        '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var l,h="",c=this,u="function",p=this.escapeExpression;return h+='<li>\r\n    <a href="#members/'+p((l=t&&t.member,l=null==l||l===!1?l:l.id,typeof l===u?l.apply(t):l))+'">'+p((l=t&&t.member,l=null==l||l===!1?l:l.short_name,typeof l===u?l.apply(t):l))+"</a>\r\n    ",l=n.unless.call(t,t&&t.attended,{hash:{},inverse:c.noop,fn:c.program(1,s,r),data:r}),(l||0===l)&&(h+=l),h+="\r\n</li>"})}),define("views/event_attendee",["jquery","underscore","backbone","hbs!templates/event_attendee","marionette"],function(e,t,n,i){return n.Marionette.ItemView.extend({template:i,modelEvents:{change:"render"}})}),define("views/event",["jquery","underscore","backbone","config","hbs!templates/event","views/event_attendee","marionette"],function(e,t,n,i,r,s){return n.Marionette.CompositeView.extend({template:r,itemView:s,itemViewContainer:"ul",events:{"click #loa-cancel, #loa-post":"onClickLOA"},initialize:function(e){e=e||{},t.bindAll(this,"onClickLOA"),this.user=e.user||{},this.unitPermissions=e.unitPermissions||{}},onBeforeRender:function(){var e=(this.options.user.get("id"),this.getRSVP(this.options.user.get("id")));this.model.set("user_expected",this.isExpected(this.model)),e&&this.model.set("user_rsvp",e.toJSON())},onRender:function(){this.model.get("unit").abbr&&(this.title=this.model.get("unit").abbr+" "+this.model.get("type"))},serializeData:function(){return t.extend({items:this.unitPermissions.pluck("abbr")},this.model.toJSON())},isExpected:function(e){var t=!1;return this.options.userAssignments.length&&e.get("unit").id&&this.options.userAssignments.any(function(n){return n.get("path_array")||n.set("path_array",n.get("unit").path.split("/").map(function(e){return e?parseInt(e,10):void 0})),n.get("unit").id===e.get("unit").id||n.get("path_array").indexOf(parseInt(e.get("unit").id,10))>-1?(t=!0,!0):void 0}),t},getRSVP:function(e){return this.collection.find(function(t){return t.get("member").id===e})},_onClickLOA:function(t){t.preventDefault();var n=t.currentTarget,r="loa-post"===n.id?1:0;if(r)this.collection.create({attended:0,excused:1,member:{id:this.user.get("id"),short_name:this.user.get("short_name")}},{wait:!0,success:function(){e(n).attr("id","loa-cancel").text("Cancel LOA")}});else{var s=this.getRSVP(this.options.user.get("id"));s&&(null!==s.get("attended")?s.save({excused:!1},{method:"DELETE",wait:!0,success:function(){e(n).attr("id","loa-post").text("Post LOA")}}):(s.id=this.user.get("id"),s.destroy({url:i.apiHost+"/events/"+this.collection.id+"/excuse",wait:!0,success:function(){e(n).attr("id","loa-post").text("Post LOA")}})))}},onClickLOA:function(t){t.preventDefault();var n=t.currentTarget,r="loa-post"===n.id?1:0,s=this.getRSVP(this.user.get("id"));s&&null!==s.get("attended")?s.save({excused:r},{method:r?"POST":"DELETE",wait:!0,success:function(){e(n).parent().removeClass(r?"loa-post":"loa-cancel").addClass(r?"loa-cancel":"loa-post")}}):r?this.collection.create({attended:null,excused:1,member:{id:this.user.get("id"),short_name:this.user.get("short_name")}},{wait:!0,success:function(){e(n).parent().removeClass("loa-post").addClass("loa-cancel")}}):(s.id=this.user.get("id"),console.log("New?",s.isNew()),s.destroy({url:i.apiHost+"/events/"+this.collection.id+"/excuse",wait:!0,success:function(){e(n).parent().removeClass("loa-cancel").addClass("loa-post")}}))}})}),define("hbs!templates/aar",["handlebars"],function(e){return e.template(function(e,t,n,i,r){function s(){return" Mandatory "}function a(){return" Non-Mandatory "}function o(e){var t;return d((t=e&&e.server,t=null==t||t===!1?t:t.name,typeof t===p?t.apply(e):t))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var l,h,c,u="",p="function",d=this.escapeExpression,f=n.helperMissing,m=this;return u+='<div class="row header">\r\n        <h1>'+d((l=t&&t.unit,l=null==l||l===!1?l:l.key,typeof l===p?l.apply(t):l))+" ",(h=n.type)?l=h.call(t,{hash:{},data:r}):(h=t&&t.type,l=typeof h===p?h.call(t,{hash:{},data:r}):h),u+=d(l)+"</h1>\r\n        <h2>"+d((h=n.dateFormat||t&&t.dateFormat,c={hash:{format:"ll HH:mm"},data:r},h?h.call(t,t&&t.datetime,c):f.call(t,"dateFormat",t&&t.datetime,c)))+" <small>",l=n["if"].call(t,t&&t.mandatory,{hash:{},inverse:m.program(3,a,r),fn:m.program(1,s,r),data:r}),(l||0===l)&&(u+=l),u+="</small></h2>\r\n        <h3>",l=n["if"].call(t,(l=t&&t.server,null==l||l===!1?l:l.name),{hash:{},inverse:m.noop,fn:m.program(5,o,r),data:r}),(l||0===l)&&(u+=l),u+='</h3>\r\n</div>\r\n<form>\r\n    <div class="row">\r\n        <div class="col-sm-4" id="attendance"></div>\r\n        <div class="col-sm-8">\r\n            <div class="form-group">\r\n                <label for="report">After Action Report</label>\r\n                <textarea name="report" class="form-control" rows="15">',(h=n.report)?l=h.call(t,{hash:{},data:r}):(h=t&&t.report,l=typeof h===p?h.call(t,{hash:{},data:r}):h),u+=d(l)+'</textarea>\r\n            </div>\r\n            <button type="submit" class="btn btn-primary btn-lg">Submit</button>\r\n        </div>\r\n    </div>\r\n</form>'})}),define("views/aar",["jquery","underscore","backbone","hbs!templates/aar","marionette"],function(e,t,n,i){return n.Marionette.Layout.extend({template:i,regions:{attendanceRegion:"#attendance"},events:{"submit form":"onSubmitForm"},initialize:function(){t.bindAll(this,"onSubmitForm")},onSubmitForm:function(t){t.preventDefault();var i=this.model.get("id"),r={report:t.currentTarget.report.value,attended:e('[name="attendance"]:checked',t.currentTarget).map(function(){return e(this).val()}).get(),absent:e('[name="attendance"]:not(:checked)',t.currentTarget).map(function(){return e(this).val()}).get()};this.model.save(r,{method:"POST",success:function(){n.history.navigate("events/"+i,{trigger:!0})}})}})}),define("hbs!templates/flash",["handlebars"],function(e){return e.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var s,a,o="",l="function",h=this.escapeExpression;return o+='<div class="alert alert-dismissable ',(a=n.type)?s=a.call(t,{hash:{},data:r}):(a=t&&t.type,s=typeof a===l?a.call(t,{hash:{},data:r}):a),o+=h(s)+'">\n    <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>\n    ',(a=n.msg)?s=a.call(t,{hash:{},data:r}):(a=t&&t.msg,s=typeof a===l?a.call(t,{hash:{},data:r}):a),o+=h(s)+"\n</div>"})}),define("views/flash",["jquery","underscore","backbone","hbs!templates/flash","marionette"],function(e,t,n,i){var r={success:"alert-success",info:"alert-info",warning:"alert-warning",error:"alert-danger"};return n.Marionette.ItemView.extend({template:i,initialize:function(e){e=e||{},this.msg=e.msg||"Unknown",this.type=r[e.type]||r.info},serializeData:function(){return{msg:this.msg,type:this.type}}})}),function(e,t){"object"==typeof exports?module.exports=t(require("handlebars")):"function"==typeof define&&define.amd?define("handlebars.helpers",["handlebars"],t):e.returnExports=t(e.Handlebars)}(this,function(e){e.registerHelper("if_eq",function(e,t){return e==t.hash.compare?t.fn(this):t.inverse(this)}),e.registerHelper("unless_eq",function(e,t){return e==t.hash.compare?t.inverse(this):t.fn(this)}),e.registerHelper("if_gt",function(e,t){return e>t.hash.compare?t.fn(this):t.inverse(this)}),e.registerHelper("unless_gt",function(e,t){return e>t.hash.compare?t.inverse(this):t.fn(this)}),e.registerHelper("if_lt",function(e,t){return e<t.hash.compare?t.fn(this):t.inverse(this)}),e.registerHelper("unless_lt",function(e,t){return e<t.hash.compare?t.inverse(this):t.fn(this)}),e.registerHelper("if_gteq",function(e,t){return e>=t.hash.compare?t.fn(this):t.inverse(this)}),e.registerHelper("unless_gteq",function(e,t){return e>=t.hash.compare?t.inverse(this):t.fn(this)}),e.registerHelper("if_lteq",function(e,t){return e<=t.hash.compare?t.fn(this):t.inverse(this)}),e.registerHelper("unless_lteq",function(e,t){return e<=t.hash.compare?t.inverse(this):t.fn(this)}),e.registerHelper("nl2br",function(t){t=e.Utils.escapeExpression(t);var n=(t+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br>$2");return new e.SafeString(n)}),e.registerHelper("if_inarray",function(e,t){return t.hash.compare.indexOf(e)>-1?t.fn(this):t.inverse(this)}),e.registerHelper("dateFormat",function(e,t){if(window.moment){var n=t.hash.format||"MMM Do, YYYY";return window.moment(e).format(n)}return e}),e.registerHelper("join",function(e,t){return e.join(t.hash.delimiter)}),e.registerHelper("or",function(e,t,n){return e||t?n.fn(this):n.inverse(this)}),e.registerHelper("add",function(e,t){return e+t}),e.registerHelper("subtract",function(e,t){return e-t})}),define("router",["jquery","underscore","backbone","marionette","handlebars","util","models/member","models/user","models/event","collections/units","collections/assignments","collections/permissions","collections/promotions","collections/awardings","collections/member_attendance","collections/event_attendance","collections/unit_attendance","collections/qualifications","collections/events","views/member","views/unit","views/roster","views/nav","views/member_admin","views/member_profile","views/member_modify","views/service_record","views/member_attendance","views/unit_attendance","views/qualifications","views/calendar","views/event","views/aar","views/flash","handlebars.helpers","jquery-bootstrap","moment","fullcalendar"],function(e,t,n,i,r,s,a,o,l,h,c,u,p,d,f,m,g,v,b,y,x,w,k,_,S,E,q,N,C,P,O,M,A,j){return n.Router.extend({routes:{"":"roster","units/:filter/*path":"unit","units/:filter":"unit","members/:id/*path":"member","members/:id":"member",calendar:"calendar","events/:id":"event","events/:id/aar":"aar"},initialize:function(e){e=e||{},this.app=e.app||new n.Marionette.Application,this.user=new o;var t=new k({model:this.user});this.app.navRegion.show(t),this.user.fetch()},showView:function(t){this.app.mainRegion.show(t),document.title=void 0!==t.title&&t.title?t.title:e("title").text(),s.scrollToTop()},flash:function(e,t){console.log("Error",e,t);var n=new j({msg:e,type:t});this.app.flashRegion.show(n)},roster:function(t){var n=this,i=[],r=new h(null,{filter:t||"Bn",children:!0,members:!0}),a=new w({collection:r});this.app.navRegion.currentView.setHighlight("roster"),i.push(r.fetch()),s.loading(!0),e.when.apply(e,i).done(function(){s.loading(!1),n.showView(a)})},unit:function(t,n){var i=this,r=[],a=new h(null,{filter:t||"Bn"}),o=new x({collection:a});this.app.navRegion.currentView.setHighlight("roster");var l;if(n=n?n.replace(/\//g,""):"","attendance"==n){o.setHighlight("attendance");var c=new g(null,{filter:t||"Bn"});r.push(c.fetch()),l=new C({collection:c})}else o.setHighlight("roster"),a.children=!0,a.members=!0,l=new w({collection:a});r.push(a.fetch()),s.loading(!0),e.when.apply(e,r).done(function(){s.loading(!1),i.showView(o),l&&o.pageRegion.show(l)})},member:function(t,n){var i=this,r=[],o=new a({id:t}),l=new c(null,{member_id:t}),h=new u(null,{member_id:t}),m=new y({model:o,assignments:l}),g=new _({collection:h});this.app.navRegion.currentView.setHighlight("roster"),r.push(o.fetch(),l.fetch(),h.fetch());var b;if(n=n?n.replace(/\//g,""):"","servicerecord"==n){m.setHighlight("servicerecord");var x=new p(null,{member_id:t});r.push(x.fetch());var w=new d(null,{member_id:t});r.push(w.fetch()),b=new q({assignments:l,promotions:x,awardings:w})}else if("attendance"==n){m.setHighlight("attendance");var k=new f(null,{member_id:t});r.push(k.fetch()),b=new N({collection:k})}else if("qualifications"==n){m.setHighlight("qualifications");var C=new v(null,{member_id:t});r.push(C.fetch()),b=new P({collection:C})}else"modify"==n?(m.setHighlight("profile"),b=new E({model:o})):(m.setHighlight("profile"),b=new S({model:o}));s.loading(!0),e.when.apply(e,r).done(function(){s.loading(!1),i.showView(m),m.adminRegion.show(g),b&&m.pageRegion.show(b)})},calendar:function(){var t=this,n=[],i=new b,r=new c(null,{current:!0}),a=new O({collection:i,userAssignments:r});this.app.navRegion.currentView.setHighlight("calendar"),n.push(r.fetch()),s.loading(!0),e.when.apply(e,n).done(function(){s.loading(!1),t.showView(a)})},event:function(t){var n=this,i=[],r=new c(null,{current:!0}),a=new l({id:t}),o=new m(null,{id:t}),h=new u,p=new M({model:a,collection:o,user:this.user,userAssignments:r,unitPermissions:h});o.on("request",function(){s.loading(!0)}).on("sync",function(){s.loading(!1)}).on("error",function(e,t){n.flash(t.responseJSON.error||"","error"),s.loading(!1)}),this.app.navRegion.currentView.setHighlight("calendar"),i.push(a.fetch(),r.fetch()),s.loading(!0),e.when.apply(e,i).done(function(){a.get("attendance").length&&o.add(a.get("attendance")),h.unit_id=a.get("unit").id,i=[],i.push(h.fetch()),e.when.apply(e,i).done(function(){s.loading(!1),n.showView(p)})})},aar:function(t){var n=this,i=[],r=new l({id:t}),a=new h(null,{children:!0,members:!0}),o=new m(null,{id:t}),c=new A({model:r}),u=new w({collection:a,eventAttendance:o,attendance:!0});r.on("request",function(){s.loading(!0)}).on("sync",function(){s.loading(!1)}).on("error",function(e,t){n.flash(t.responseJSON.error||"","error"),s.loading(!1)}),this.app.navRegion.currentView.setHighlight("calendar"),i.push(r.fetch()),e.when.apply(e,i).done(function(){a.filter=r.get("unit").id,r.get("attendance").length&&o.add(r.get("attendance")),i=[],i.push(a.fetch()),e.when.apply(e,i).done(function(){n.showView(c),c.attendanceRegion.show(u)})})}})}),window.requirejs=window.requirejs||{},function(e){e.config({baseUrl:"scripts/",paths:{jquery:["//ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min","../vendor/jquery/jquery.min"],underscore:["//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.5.2/underscore-min","../vendor/underscore/underscore-min"],backbone:["//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.0/backbone-min","../vendor/backbone/backbone-min"],handlebars:"../vendor/handlebars/handlebars.min",marionette:["//cdnjs.cloudflare.com/ajax/libs/backbone.marionette/1.5.1-bundled/backbone.marionette.min","../vendor/marionette/lib/backbone.marionette.min"],"jquery-bootstrap":["//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.1.0/js/bootstrap.min","../vendor/bootstrap/dist/bootstrap.min"],moment:["//cdnjs.cloudflare.com/ajax/libs/moment.js/2.5.1/moment.min","../vendor/moment/moment.min"],fullcalendar:["//cdnjs.cloudflare.com/ajax/libs/fullcalendar/1.6.4/fullcalendar.min","../vendor/fullcalendar/fullcalendar.min"],nprogress:"../vendor/nprogress/nprogress",text:"../vendor/text/text",hbs:"../vendor/requirejs-hbs/hbs"},shim:{underscore:{exports:"_"},backbone:{exports:"Backbone",deps:["jquery","underscore"]},handlebars:{exports:"Handlebars"},marionette:{exports:"Marionette",deps:["jquery","underscore","backbone"]},"jquery-jsonp":{deps:["jquery"]},"jquery-bootstrap":{deps:["jquery"]},fullcalendar:{deps:["jquery"]},nprogress:{exports:"NProgress"}},hbs:{templateExtension:".html"}}),require(["router"],function(e){window.DEBUG=!1,$.ajaxSetup({cache:!0,xhrFields:{withCredentials:!0}});var t=new Backbone.Marionette.Application;t.addRegions({mainRegion:"#main",navRegion:"#nav",flashRegion:"#flash"}),t.addInitializer(function(){new e({app:this}),Backbone.history.start()}),t.start()})}(window.requirejs),define("main",function(){});